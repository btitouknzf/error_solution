エラー対処票
-------------------------------------------------------
使用環境

状況

エラー内容

原因

解決策

-------------------------------------------------------

001
使用環境
STS+TERASOLUNA+Spring-test(Junit)+H2+mybatis+maven

状況
テスト用にDBをH2で構築

エラー内容
Caused by: java.lang.ClassNotFoundException: org.h2.Driver
	at java.net.URLClassLoader.findClass(Unknown Source)
	at java.lang.ClassLoader.loadClass(Unknown Source)
	at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
	at java.lang.ClassLoader.loadClass(Unknown Source)
	at org.apache.commons.dbcp2.BasicDataSource.createConnectionFactory(BasicDataSource.java:2131)
	... 50 common frames omitted
	
原因
H2のライブラリとのパスが繋がっていない。

解決策
pom.xmlのprofilesにcom.h2databaseを設定する。

	<profiles>
        <profile>
            <id>local</id>
            <activation>
                <activeByDefault>true</activeByDefault>
            </activation>
            <properties>
                <resource.directory>src/main/resources</resource.directory>
                <buildFinalName>${project.artifactId}-${project.version}</buildFinalName>
            </properties>
            <dependencies>
                <dependency>
                    <groupId>com.h2database</groupId>
                    <artifactId>h2</artifactId>
                    <scope>runtime</scope>
                </dependency>
            </dependencies>
        </profile>
        <profile>
            <id>test-server</id>
            <properties>
                <resource.directory>${basedir}/configs/test-server/resources</resource.directory>
                <buildFinalName>${project.artifactId}-${project.version}-test-server</buildFinalName>
            </properties>
        </profile>
        <profile>
            <id>production-server</id>
            <properties>
                <resource.directory>${basedir}/configs/production-server/resources</resource.directory>
                <buildFinalName>${project.artifactId}-${project.version}-production-server</buildFinalName>
            </properties>
        </profile>
    </profiles>

-------------------------------------------------------

002
使用環境
STS+TERASOLUNA+Spring-test(Junit)+H2+mybatis+maven

状況
テスト用にDBをH2で構築
test-context.xmlにてAOPの設定を行った

エラー内容
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'exceptionLogger' available
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition(DefaultListableBeanFactory.java:685)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getMergedLocalBeanDefinition(AbstractBeanFactory.java:1199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:284)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:351)
	... 59 common frames omitted
	

原因
exceptionLoggerクラスが見つからない


解決策
xmlにexceptionLoggerクラスのbean定義を追加する。

<bean id="exceptionLogger" class="org.terasoluna.gfw.common.exception.ExceptionLogger" />

-------------------------------------------------------
003
使用環境
STS+TERASOLUNA+Spring-test(Junit)+H2+mybatis+maven+spring-test-dbunit

状況
@DatabaseSetupアノテーションで、xmlファイルからデータをセットアップする

エラー内容
Caused by: java.lang.NoClassDefFoundError: org/dbunit/dataset/xml/FlatXmlDataSetBuilder
	at com.github.springtestdbunit.dataset.FlatXmlDataSetLoader.createDataSet(FlatXmlDataSetLoader.java:36)
	at com.github.springtestdbunit.dataset.AbstractDataSetLoader.loadDataSet(AbstractDataSetLoader.java:54)
	at com.github.springtestdbunit.DbUnitRunner.loadDataset(DbUnitRunner.java:209)
	at com.github.springtestdbunit.DbUnitRunner.loadDataSets(DbUnitRunner.java:192)
	at com.github.springtestdbunit.DbUnitRunner.setupOrTeardown(DbUnitRunner.java:173)
	at com.github.springtestdbunit.DbUnitRunner.beforeTestMethod(DbUnitRunner.java:75)
	at com.github.springtestdbunit.DbUnitTestExecutionListener.beforeTestMethod(DbUnitTestExecutionListener.java:185)
	at com.github.springtestdbunit.TestExecutionListenerChain$3.call(TestExecutionListenerChain.java:94)
	at com.github.springtestdbunit.TestExecutionListenerChain.runChain(TestExecutionListenerChain.java:127)
	... 24 common frames omitted
	Caused by: java.lang.ClassNotFoundException: org.dbunit.dataset.xml.FlatXmlDataSetBuilder
	at java.net.URLClassLoader.findClass(Unknown Source)
	at java.lang.ClassLoader.loadClass(Unknown Source)
	at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
	at java.lang.ClassLoader.loadClass(Unknown Source)
	... 33 common frames omitted

原因
@DatabaseSetupはspring-test-dbunitが提供している
必要なライブラリが不足している。
dbunitが提供している、「FlatXmlDataSetBuilder.class」が存在していないため

解決策

自分の設定していた、pom.xmlのmavenプラグインを確認
<dependency>
    <groupId>org.dbunit</groupId>
    <artifactId>dbunit</artifactId>
    <version>2.4.3</version>
</dependency>

Maven依存関係から org.dbunit.dataset.xml.FlatXmlDataSetBuilder.classを確認
⇒存在しない

バージョンを新しくして設定
<dependency>
    <groupId>org.dbunit</groupId>
    <artifactId>dbunit</artifactId>
    <version>2.5.3</version>
</dependency>

Maven依存関係から org.dbunit.dataset.xml.FlatXmlDataSetBuilder.classを確認
⇒ある

正常に動作


-------------------------------------------------------


-------------------------------------------------------
使用環境

状況
antプロジェクトをmavenに変換し、実行しようとした


エラー内容
pom.xml 依存関係階層
Project read error



原因
謎。でも実行できた


解決策

-------------------------------------------------------
使用環境

状況
antプロジェクトをmavenに変換し、実行しようとした


エラー内容



原因



解決策
catalina.2017-08-28.log
28-Aug-2017 14:21:24.567 情報 [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployDescriptor 設定記述子 C:\develop\sts-bundle\pivotal-tc-server-developer-3.2.2.RELEASE\base-instance\conf\Catalina\localhost\terasoluna-security-validator-sampleapp.xml を配備します
28-Aug-2017 14:21:24.622 警告 [localhost-startStop-1] org.apache.catalina.startup.SetContextPropertiesRule.begin [SetContextPropertiesRule]{Context} Setting property 'source' to 'org.eclipse.jst.jee.server:terasoluna-security-validator-sampleapp' did not find a matching property.
28-Aug-2017 14:21:27.933 警告 [localhost-startStop-1] org.apache.tomcat.jdbc.pool.ConnectionPool.checkPoolConfiguration initialSize is larger than maxActive, setting initialSize to: 4
28-Aug-2017 14:21:27.934 警告 [localhost-startStop-1] org.apache.tomcat.jdbc.pool.ConnectionPool.checkPoolConfiguration minIdle is larger than maxActive, setting minIdle to: 4
28-Aug-2017 14:21:27.934 警告 [localhost-startStop-1] org.apache.tomcat.jdbc.pool.ConnectionPool.checkPoolConfiguration maxIdle is smaller than minIdle, setting maxIdle to: 4
28-Aug-2017 14:21:28.876 情報 [localhost-startStop-1] org.apache.jasper.servlet.TldScanner.scanJars At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.
28-Aug-2017 14:21:31.407 重大 [localhost-startStop-1] org.apache.catalina.core.StandardContext.startInternal One or more Filters failed to start. Full details will be found in the appropriate container log file
28-Aug-2017 14:21:31.407 重大 [localhost-startStop-1] org.apache.catalina.core.StandardContext.startInternal 以前のエラーのためにコンテキストの起動が失敗しました [/terasoluna-security-validator-sampleapp]
28-Aug-2017 14:21:31.430 警告 [localhost-startStop-1] org.apache.catalina.loader.WebappClassLoaderBase.clearReferencesJdbc The web application [terasoluna-security-validator-sampleapp] registered the JDBC driver [org.postgresql.Driver] but failed to unregister it when the web application was stopped. To prevent a memory leak, the JDBC Driver has been forcibly unregistered.
28-Aug-2017 14:21:31.436 情報 [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployDescriptor Deployment of configuration descriptor C:\develop\sts-bundle\pivotal-tc-server-developer-3.2.2.RELEASE\base-instance\conf\Catalina\localhost\terasoluna-security-validator-sampleapp.xml has finished in 6,867 ms


localhost.2017-08-28.log
28-Aug-2017 15:02:39.006 情報 [localhost-startStop-1] org.apache.catalina.core.ApplicationContext.log Initializing Spring root WebApplicationContext
28-Aug-2017 15:02:41.668 情報 [localhost-startStop-1] org.apache.catalina.core.ApplicationContext.log Initializing log4j from [classpath:log4j.properties]
28-Aug-2017 15:02:41.688 重大 [localhost-startStop-1] org.apache.catalina.core.StandardContext.filterStart フィルタ securityValidateFilter の起動中の例外です
 java.lang.ClassNotFoundException: jp.terasoluna.security.securityvalidator.filter.SecurityValidateFilter
	at org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1285)
	at org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1119)
	at org.apache.catalina.core.DefaultInstanceManager.loadClass(DefaultInstanceManager.java:520)
	at org.apache.catalina.core.DefaultInstanceManager.loadClassMaybePrivileged(DefaultInstanceManager.java:501)
	at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:118)
	at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:258)
	at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:105)
	at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4572)
	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5215)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
	at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:724)
	at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:700)
	at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:734)
	at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:596)
	at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1805)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)






mavenとweb-inf/libの読み込みがうまく出来てない
http://www.tekboy.net/archives/673



-------------------------------------------------------





NEXUSからmavenを使おうとした



ビルド中にエラーが発生しました。
プロジェクト 'terasoluna-security-validator-sampleapp' でビルダー 'Maven プロジェクト・ビルダー' の実行中にエラーが発生しました。
ビルド・プランを計算できませんでした: Plugin org.apache.maven.plugins:maven-resources-plugin:2.6 or one of its dependencies could not be resolved: Failed to read artifact descriptor for org.apache.maven.plugins:maven-resources-plugin:jar:2.6
Plugin org.apache.maven.plugins:maven-resources-plugin:2.6 or one of its dependencies could not be resolved: Failed to read artifact descriptor for org.apache.maven.plugins:maven-resources-plugin:jar:2.6
ビルド・プランを計算できませんでした: Plugin org.apache.maven.plugins:maven-resources-plugin:2.6 or one of its dependencies could not be resolved: Failed to read artifact descriptor for org.apache.maven.plugins:maven-resources-plugin:jar:2.6
Plugin org.apache.maven.plugins:maven-resources-plugin:2.6 or one of its dependencies could not be resolved: Failed to read artifact descriptor for org.apache.maven.plugins:maven-resources-plugin:jar:2.6


説明	リソース	パス	ロケーション	型
CoreException: ビルド・プランを計算できませんでした: Plugin org.apache.maven.plugins:maven-compiler-plugin:3.1 or one of its dependencies could not be resolved: Failed to read artifact descriptor for org.apache.maven.plugins:maven-compiler-plugin:jar:3.1: ArtifactResolutionException: Failure to transfer org.apache.maven.plugins:maven-compiler-plugin:pom:3.1 from https://repo1.x-network.jp/nexus/repository/maven_public/ was cached in the local repository, resolution will not be reattempted until the update interval of nexus has elapsed or updates are forced. Original error: Could not transfer artifact org.apache.maven.plugins:maven-compiler-plugin:pom:3.1 from/to nexus (https://repo1.x-network.jp/nexus/repository/maven_public/): Connection reset	pom.xml	/terasoluna-security-validator-sampleapp	行 7	Maven プロジェクト・ビルド・ライフサイクル・マッピング問題


maven installで以下エラーが発生していた
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building terasoluna-security-validator-sampleapp 0.0.1-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] Downloading: https://repo1.x-network.jp/nexus/repository/maven_public/org/apache/maven/plugins/maven-resources-plugin/2.6/maven-resources-plugin-2.6.pom
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 05:00 min
[INFO] Finished at: 2017-08-29T14:00:03+09:00
[INFO] Final Memory: 8M/123M
[INFO] ------------------------------------------------------------------------
[ERROR] Plugin org.apache.maven.plugins:maven-resources-plugin:2.6 or one of its dependencies could not be resolved: Failed to read artifact descriptor for org.apache.maven.plugins:maven-resources-plugin:jar:2.6: Could not transfer artifact org.apache.maven.plugins:maven-resources-plugin:pom:2.6 from/to nexus (https://repo1.x-network.jp/nexus/repository/maven_public/): Connection reset -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginResolutionException

キャッシュされているフォルダを削除した
http://web.plus-idea.net/2016/08/eclipse-%E3%81%AEmarven%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E4%BD%9C%E6%88%90%E6%99%82%E3%81%ABcould-not-resolve-artifact-archetypes%E3%81%AE%E3%82%A8%E3%83%A9%E3%83%BC%E3%81%8C/



-------------------------------------------------------
antプロジェクトをmaven化したときのエラー

説明	リソース	パス	ロケーション	型
コンテナー 'Web App ライブラリー' が存在しないライブラリー 'C:\work\TERAlibポータル移行 確認\AL047_動的コードリスト抽出・表示 ver1.1.1_maven\動的コードリスト抽出・表示 ver1.1.1\sample\functionsample-thin-taglibex\webapps\WEB-INF\lib\terasoluna-taglibex-1.1.0.jar' を参照しています	functionsample-thin-taglibex		ビルド・パス	ビルド・パス問題

原因
maven依存関係のライブラリがweb-inf/libと紐づいていないため。

解決
ビルドパスの構成⇒デプロイメント・アセンブリ⇒追加⇒Javaビルドパスエントリー⇒maven依存関係




-------------------------------------------------------

JasperException


[2017/08/29 16:59:33][ERROR][RequestProcessorEx] sessionHash = A4E9901D1DA6E66AE70A52572ED5268FE50BDE56
[2017/08/29 16:59:33][ERROR][RequestProcessorEx] org.apache.jasper.JasperException: /UC_A01_01/SC_A01_01_01.jsp (line: 241, column: 64) The JSP specification requires that an attribute name is preceded by whitespace
	at org.apache.jasper.compiler.DefaultErrorHandler.jspError(DefaultErrorHandler.java:41)
	at org.apache.jasper.compiler.ErrorDispatcher.dispatch(ErrorDispatcher.java:291)
	at org.apache.jasper.compiler.ErrorDispatcher.jspError(ErrorDispatcher.java:97)
	at org.apache.jasper.compiler.Parser.parseAttributes(Parser.java:171)
	at org.apache.jasper.compiler.Parser.parseAttributes(Parser.java:160)
	at org.apache.jasper.compiler.Parser.parseCustomTag(Parser.java:1254)
	at org.apache.jasper.compiler.Parser.parseElements(Parser.java:1473)
	at org.apache.jasper.compiler.Parser.parseBody(Parser.java:1686)
	at org.apache.jasper.compiler.Parser.parseOptionalBody(Parser.java:1019)
	at org.apache.jasper.compiler.Parser.parseCustomTag(Parser.java:1294)
	at org.apache.jasper.compiler.Parser.parseElements(Parser.java:1473)
	at org.apache.jasper.compiler.Parser.parseBody(Parser.java:1686)
	at org.apache.jasper.compiler.Parser.parseOptionalBody(Parser.java:1019)
	at org.apache.jasper.compiler.Parser.parseCustomTag(Parser.java:1294)
	at org.apache.jasper.compiler.Parser.parseElements(Parser.java:1473)
	at org.apache.jasper.compiler.Parser.parseBody(Parser.java:1686)
	at org.apache.jasper.compiler.Parser.parseOptionalBody(Parser.java:1019)
	at org.apache.jasper.compiler.Parser.parseCustomTag(Parser.java:1294)
	at org.apache.jasper.compiler.Parser.parseElements(Parser.java:1473)
	at org.apache.jasper.compiler.Parser.parseBody(Parser.java:1686)
	at org.apache.jasper.compiler.Parser.parseOptionalBody(Parser.java:1019)
	at org.apache.jasper.compiler.Parser.parseCustomTag(Parser.java:1294)
	at org.apache.jasper.compiler.Parser.parseElements(Parser.java:1473)
	at org.apache.jasper.compiler.Parser.parseBody(Parser.java:1686)
	at org.apache.jasper.compiler.Parser.parseOptionalBody(Parser.java:1019)
	at org.apache.jasper.compiler.Parser.parseCustomTag(Parser.java:1294)
	at org.apache.jasper.compiler.Parser.parseElements(Parser.java:1473)
	at org.apache.jasper.compiler.Parser.parse(Parser.java:145)
	at org.apache.jasper.compiler.ParserController.doParse(ParserController.java:244)
	at org.apache.jasper.compiler.ParserController.parse(ParserController.java:105)
	at org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:201)
	at org.apache.jasper.compiler.Compiler.compile(Compiler.java:372)
	at org.apache.jasper.compiler.Compiler.compile(Compiler.java:349)
	at org.apache.jasper.compiler.Compiler.compile(Compiler.java:333)
	at org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:600)
	at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:368)
	at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:385)
	at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:329)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:230)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:726)
	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:469)
	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:394)
	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:311)
	at org.apache.struts.action.RequestProcessor.doForward(RequestProcessor.java:1085)
	at org.apache.struts.action.RequestProcessor.internalModuleRelativeForward(RequestProcessor.java:1023)
	at org.apache.struts.action.RequestProcessor.processForward(RequestProcessor.java:572)
	at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:221)
	at jp.terasoluna.fw.web.struts.action.RequestProcessorEx.process(RequestProcessorEx.java:149)
	at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1196)
	at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:432)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:230)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:726)
	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:469)
	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:394)
	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:311)
	at org.apache.struts.action.RequestProcessor.doForward(RequestProcessor.java:1085)
	at org.apache.struts.action.RequestProcessor.processForwardConfig(RequestProcessor.java:398)
	at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:241)
	at jp.terasoluna.fw.web.struts.action.RequestProcessorEx.process(RequestProcessorEx.java:149)
	at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1196)
	at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:432)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:230)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165)
	at jp.terasoluna.fw.web.thin.AuthenticationControlFilter.doFilter(AuthenticationControlFilter.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165)
	at jp.terasoluna.fw.web.thin.ExtensionFilter.doFilter(ExtensionFilter.java:232)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:198)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:108)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:620)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:349)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:784)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:802)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1410)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
	
	スペースがない
	http://d.hatena.ne.jp/yamap_55/20130731/1375285126
	
	
	-------------------------------------------------------
	
	コンソール警告
	説明	リソース	パス	ロケーション	型
Map は raw 型です。総称型 Map<K,V> への参照は、パラメーター化する必要があります	AbstractReportAction.java	/toursample-javaweb/sources/jp/terasoluna/toursample/common/action	行 150	Java 問題


	[2017/08/29 17:18:53][WARN][RequestProcessor] 処理できない例外がスローされました: class java.lang.ClassCastException
[2017/08/29 17:18:53][ERROR][RequestProcessorEx] sessionHash = 7758224AFBFBAFB35144128CFE70651A8CB2A9A3
[2017/08/29 17:18:53][ERROR][RequestProcessorEx] javax.servlet.ServletException: java.lang.ClassCastException: java.lang.String cannot be cast to java.lang.Integer
	at org.apache.struts.action.RequestProcessor.processException(RequestProcessor.java:535)
	at org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:433)
	at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:236)
	at jp.terasoluna.fw.web.struts.action.RequestProcessorEx.process(RequestProcessorEx.java:149)
	at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1196)
	at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:432)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:230)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165)
	at jp.terasoluna.fw.web.thin.AuthenticationControlFilter.doFilter(AuthenticationControlFilter.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165)
	at jp.terasoluna.fw.web.thin.ExtensionFilter.doFilter(ExtensionFilter.java:232)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:198)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:108)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:620)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:349)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:784)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:802)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1410)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.ClassCastException: java.lang.String cannot be cast to java.lang.Integer
	at jp.terasoluna.toursample.uc_a01_01.blogic.RP_A01_01_01_02BLogicImpl.execute(RP_A01_01_01_02BLogicImpl.java:132)
	at jp.terasoluna.toursample.uc_a01_01.blogic.RP_A01_01_01_02BLogicImpl.execute(RP_A01_01_01_02BLogicImpl.java:1)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:307)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:182)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:149)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:106)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:89)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)
	at com.sun.proxy.$Proxy6.execute(Unknown Source)
	at jp.terasoluna.fw.web.struts.actions.BLogicAction.doExecuteBLogic(BLogicAction.java:137)
	at jp.terasoluna.fw.web.struts.actions.AbstractBLogicAction.doExecute(AbstractBLogicAction.java:278)
	at jp.terasoluna.fw.web.struts.actions.ActionEx.execute(ActionEx.java:221)
	at org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:431)
	... 38 more
java.lang.ClassCastException: java.lang.String cannot be cast to java.lang.Integer
	at jp.terasoluna.toursample.uc_a01_01.blogic.RP_A01_01_01_02BLogicImpl.execute(RP_A01_01_01_02BLogicImpl.java:132)
	at jp.terasoluna.toursample.uc_a01_01.blogic.RP_A01_01_01_02BLogicImpl.execute(RP_A01_01_01_02BLogicImpl.java:1)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:307)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:182)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:149)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:106)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:89)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)
	at com.sun.proxy.$Proxy6.execute(Unknown Source)
	at jp.terasoluna.fw.web.struts.actions.BLogicAction.doExecuteBLogic(BLogicAction.java:137)
	at jp.terasoluna.fw.web.struts.actions.AbstractBLogicAction.doExecute(AbstractBLogicAction.java:278)
	at jp.terasoluna.fw.web.struts.actions.ActionEx.execute(ActionEx.java:221)
	at org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:431)
	at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:236)
	at jp.terasoluna.fw.web.struts.action.RequestProcessorEx.process(RequestProcessorEx.java:149)
	at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1196)
	at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:432)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:230)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165)
	at jp.terasoluna.fw.web.thin.AuthenticationControlFilter.doFilter(AuthenticationControlFilter.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165)
	at jp.terasoluna.fw.web.thin.ExtensionFilter.doFilter(ExtensionFilter.java:232)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:198)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:108)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:620)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:349)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:784)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:802)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1410)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
	
	
	Map は raw 型です。総称型 Map<K,V> への参照は、パラメーター化する必要があります
	Classはraw型です。総称型Class<T>への参照は、パラメーター化する必要があります
	http://did2.blog64.fc2.com/blog-entry-299.html
	Java1.5以降から
List<String> list = new ArrayList<String>();
みたいにあらかじめ宣言の時にそこに何が入るかの型を指定するようになってます。
	https://detail.chiebukuro.yahoo.co.jp/qa/question_detail/q1287653992
	
	
	https://amg-solution.jp/blog/10052
	
	
	警告
	説明	リソース	パス	ロケーション	型
型の安全性: getParameterMap(ActionForm, HttpServletRequest) の型 RP_A01_05_01_01Action からの戻りの型 Map は、未検査の型変換を使用して型 AbstractReportAction<T> から Map<ActionMapping,HttpServletRequest> に準拠するようにする必要があります	RP_A01_05_01_01Action.java	/toursample-javaweb/sources/jp/terasoluna/toursample/uc_a01_05/action	行 78	Java 問題

	
	説明	リソース	パス	ロケーション	型
Map は raw 型です。総称型 Map<K,V> への参照は、パラメーター化する必要があります	RP_A01_05_01_01Action.java	/toursample-javaweb/sources/jp/terasoluna/toursample/uc_a01_05/action	行 78	Java 問題

	
	
	
	
-------------------------------------------------------

atomでsphinxを使用するときの設定
http://qiita.com/tsujimitsu/items/907d7a2fae2057d0fb1f
https://www.cresco.co.jp/blog/entry/955/


必要なもの
Atom
パッケージ
pandoc
rst-preview-pandoc
language-reStructuredText



pandocのインストール
環境変数を通す
PATH
C:\Users\terafw0672\AppData\Local\Pandoc

pandoc --version
で確認


-------------------------------------------------------
atomでエラー

Uncaught Error: tunneling socket could not be established, statusCode=407
stream.js:74
Show Stack Trace
This is likely a bug in Atom.
Create issue on atom/atom


http://d-and-i.hatenablog.com/entry/2016/09/19/090000




-------------------------------------------------------
使用環境
postgresqlにmvnプロジェクトでDBを構築しようとした

$ mvn -f atrs-initdb/pom.xml sql:execute

状況



エラー内容

$ mvn -f atrs-initdb/pom.xml sql:execute
[INFO] Scanning for projects...
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building atrs-initdb 1.1.0.RELEASE
[INFO] ------------------------------------------------------------------------
[INFO]
[INFO] --- sql-maven-plugin:1.5:execute (default-cli) @ atrs-initdb ---
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 2.445 s
[INFO] Finished at: 2017-09-05T16:31:17+09:00
[INFO] Final Memory: 10M/123M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.codehaus.mojo:sql-maven-plugin:1.5:execute (default-cli)
 on project atrs-initdb: 接続試行は失敗しました。: UTF-8シーケンス違反: 初期バイトは、10xxx
xxx: 131 -> [Help 1]
[ERROR]
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please read the follo
wing articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException



原因
pom.xmlの設定

<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <parent>
    <groupId>jp.co.ntt.atrs</groupId>
    <artifactId>atrs-parent</artifactId>
    <version>1.1.0.RELEASE</version>
    <relativePath>../atrs-parent/pom.xml</relativePath>
  </parent>

  <artifactId>atrs-initdb</artifactId>
  <name>${project.artifactId}</name>

  <profiles>
    <profile>
      <id>local-postgres</id>
      <activation>
        <activeByDefault>true</activeByDefault>
      </activation>
      <properties>
        <db.encoding>UTF8</db.encoding>
        <db.basedir>src/sqls/postgres</db.basedir>
        <db.url>jdbc:postgresql://127.0.0.1:5432/atrs</db.url>
        <db.username>postgres</db.username>
        <db.password>postgres</db.password>
        <db.driver>org.postgresql.Driver</db.driver>
        <db.groupId>org.postgresql</db.groupId>
        <db.artifactId>postgresql</db.artifactId>
        <db.version>${postgresql.version}</db.version>
        <db.delimiterType>row</db.delimiterType>
      </properties>
    </profile>
  </profiles>

  <build>
    <plugins>
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>sql-maven-plugin</artifactId>
        <version>1.5</version>
        <dependencies>
          <dependency>
            <groupId>${db.groupId}</groupId>
            <artifactId>${db.artifactId}</artifactId>
            <version>${db.version}</version>
          </dependency>
        </dependencies>
        <configuration>
          <driver>${db.driver}</driver>
          <url>${db.url}</url>
          <username>${db.username}</username>
          <password>${db.password}</password>
          <encoding>${db.encoding}</encoding>
          <autocommit>false</autocommit>
          <delimiterType>${db.delimiterType}</delimiterType>
          <onError>continue</onError>
          <skip>false</skip>
          <fileset>
            <basedir>${db.basedir}</basedir>
            <includes>
              <include>0*.sql</include>
            </includes>
          </fileset>
          <orderFile>ascending</orderFile>
        </configuration>
      </plugin>
    </plugins>
  </build>
</project>



解決策

https://jar-download.com/explore-java-source-code-detail.php?file=./javaSource/org.postgresql/postgresql/9.4.1210/org/postgresql/translation/ja.po&key=b64db1974c5e26b32f8e01c2af2584b5


http://nobeans.hatenablog.com/entry/20080421/1208755170

UTF8⇒UTF-8に変更してみる

$ mvn -f atrs-initdb/pom.xml sql:execute
[INFO] Scanning for projects...
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building atrs-initdb 1.1.0.RELEASE
[INFO] ------------------------------------------------------------------------
[INFO]
[INFO] --- sql-maven-plugin:1.5:execute (default-cli) @ atrs-initdb ---
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1.067 s
[INFO] Finished at: 2017-09-05T17:01:38+09:00
[INFO] Final Memory: 10M/155M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.codehaus.mojo:sql-maven-plugin:1.5:execute (default-cli)
 on project atrs-initdb: Execution default-cli of goal org.codehaus.mojo:sql-maven-plugin:1
.5:execute failed: basedir src\sqls\postgres does not exist -> [Help 1]
[ERROR]
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please read the follo
wing articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginExecutionException



UTF-8⇒UTF8に戻す
$ mvn -f atrs-initdb/pom.xml sql:execute
[INFO] Scanning for projects...
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building atrs-initdb 1.1.0.RELEASE
[INFO] ------------------------------------------------------------------------
[INFO]
[INFO] --- sql-maven-plugin:1.5:execute (default-cli) @ atrs-initdb ---
[INFO] Executing file: C:\work\atrs\atrs-initdb\src\sqls\postgres\00000_drop_all_tables.sql

[INFO] Executing file: C:\work\atrs\atrs-initdb\src\sqls\postgres\00100_create_all_tables.s
ql
[INFO] Executing file: C:\work\atrs\atrs-initdb\src\sqls\postgres\00200_insert_fixed_value.
sql
[INFO] Executing file: C:\work\atrs\atrs-initdb\src\sqls\postgres\00210_insert_route.sql
[INFO] Executing file: C:\work\atrs\atrs-initdb\src\sqls\postgres\00220_insert_flight_maste
r.sql
[INFO] Executing file: C:\work\atrs\atrs-initdb\src\sqls\postgres\00230_insert_member.sql
[INFO] Executing file: C:\work\atrs\atrs-initdb\src\sqls\postgres\00240_insert_peak_time.sq
l
[INFO] Executing file: C:\work\atrs\atrs-initdb\src\sqls\postgres\00250_insert_flight.sql
[INFO] 8 of 8 SQL statements executed successfully
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 14.086 s
[INFO] Finished at: 2017-09-05T17:02:21+09:00
[INFO] Final Memory: 9M/155M
[INFO] ------------------------------------------------------------------------




-------------------------------------------------------
使用環境
mavenのpom.xmlの依存関係取得先をmavenからローカルリポジトリ(NEXUS管理)に変更した時のエラー

状況
社内プロキシ設定がされているsetings.xmlをNEXUSにアクセスできるように設定。

今まで
<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0
                     https://maven.apache.org/xsd/settings-1.0.0.xsd">
 

 <proxies>
   <proxy>
     <id>myproxy</id>
     <active>true</active>
      <protocol>http</protocol>
      <host>127.0.0.1</host>
      <port>8080</port>
      <username>U602896</username>
      <password>6yhn5tgb</password>
      <nonProxyHosts>*.google.com|ibiblio.org</nonProxyHosts>
    </proxy>
  </proxies>
</settings>

↓
修正後
<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0
                     https://maven.apache.org/xsd/settings-1.0.0.xsd">
 

 <proxies>
   <proxy>
     <id>myproxy</id>
     <active>true</active>
      <protocol>http</protocol>
      <host>127.0.0.1</host>
      <port>8080</port>
      <username>U602896</username>
      <password>6yhn5tgb</password>
      <nonProxyHosts>*.google.com|ibiblio.org</nonProxyHosts>
    </proxy>
  </proxies>
</settings>

<servers>
    <server>
        <id>nexus</id>
        <username>btitouknzf</username>
        <password>6yhn5tgb</password>
    </server>
</servers>

<mirrors>
    <mirror>        
        <id>nexus</id>
        <mirrorOf>*</mirrorOf>
        <url>https://repo1.x-network.jp/nexus/repository/maven_public/</url>
    </mirror>
</mirrors>

STSで対象のmavenプロジェクトを実行した。

エラー内容
jarファイルが取得できていない。それどころか、STSの動作が極端に重くなった。
pom.xmlのdependencyで設定したjarが格納されるはずのディレクトリにはjarファイルは無く、
terasoluna-security-validator-web-1.0.0.pom.lastUpdatedというファイルが存在していた。

#NOTE: This is an Aether internal implementation file, its format can be changed without prior notice.
#Mon Sep 04 15:03:32 JST 2017
cd1ab7e1b294b0fdf3ccfebd1aca8ecb843d92cb@127.0.0.1\:8080>0fbad087be4a40bcae4645dabbf9387e30d44792@default-nexus-https\://repo1.x-network.jp/nexus/repository/maven_public/.lastUpdated=1504505012627
https\://repo1.x-network.jp/nexus/repository/maven_public/.error=Could not transfer artifact jp.terasoluna.fw.lib\:terasoluna-security-validator-web\:pom\:1.0.0 from/to nexus (https\://repo1.x-network.jp/nexus/repository/maven_public/)\: Connection reset


原因

http://ponkotsusechan.hatenadiary.jp/entry/2016/02/01/173000
Eclipseのプロキシ設定，mavenのsettings.xmlのどこかがいけてない可能性

解決策

ploxy設定とnexusにとりにいく際の設定が競合していた？

<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0
                     https://maven.apache.org/xsd/settings-1.0.0.xsd">
 
<servers>
    <server>
        <id>nexus</id>
        <username>btitouknzf</username>
        <password>6yhn5tgb</password>
    </server>
</servers>

<mirrors>
    <mirror>        
        <id>nexus</id>
        <mirrorOf>*</mirrorOf>
        <url>https://repo1.x-network.jp/nexus/repository/maven_public/</url>
    </mirror>
</mirrors>
</settings>
これで、正常にとりにいけた。

または、
<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0
                     https://maven.apache.org/xsd/settings-1.0.0.xsd">
 

 <proxies>
   <proxy>
     <id>myproxy</id>
     <active>true</active>
      <protocol>http</protocol>
      <host>127.0.0.1</host>
      <port>8080</port>
      <username>U602896</username>
      <password>6yhn5tgb</password>
      <nonProxyHosts>*.google.com|ibiblio.org|*.x-network.jp</nonProxyHosts>
      </proxy>
  </proxies>


<servers>
    <server>
        <id>nexus</id>
        <username>btitouknzf</username>
        <password>6yhn5tgb</password>
    </server>
</servers>

<mirrors>
    <mirror>        
        <id>nexus</id>
        <mirrorOf>*</mirrorOf>
        <url>https://repo1.x-network.jp/nexus/repository/maven_public/</url>
    </mirror>
</mirrors>
</servers>
で、nexusのサーバにアクセスしに行くときはploxy設定を無効にすることができる。


-------------------------------------------------------

spring-test+Dbsetup spring-test+Dbunit+spring-test-Dbunit spring-test
のリポジトリテスト実施方法の違い

-------------------------------------------------------

MockMVC
二つのモード
StandaloneSetupとwebAppContextSetupの違い

configurationコンフィギュレーション
設定・登録という意味？

Spring徹底入門
https://www.slideshare.net/KouheiToki/spring-66768974
http://terasolunaorg.github.io/guideline/5.0.0.RELEASE/ja/ImplementationAtEachLayer/CreateWebApplicationProject.html#bean
standalonesetup
http://qiita.com/NetPenguin/items/0e06779ecdd48d24a5db
webappcontextsetup
http://kuwalab.hatenablog.jp/entry/20130402/p1

https://myshittycode.com/2014/01/16/mockmvc-mockito-epic-tests/
-------------------------------------------------------

RestControllerとControllerの単体テストの方法の違い
http://qiita.com/tag1216/items/3680b92cf96eb5a170f0
http://qiita.com/NetPenguin/items/0e06779ecdd48d24a5db
https://yo1000.gitbooks.io/self-study-spring/content/appendix1.html

-------------------------------------------------------
controllerのテスト
mockMvc standalonesetup

		//make request mock
		MockHttpServletRequestBuilder getRequest =
				MockMvcRequestBuilders.get("/ticket/search").param("flightForm", "");
		
		//run test
		ResultActions results = mockMvc.perform(getRequest);

org.springframework.web.util.NestedServletException: Request processing failed; nested exception is javax.validation.ValidationException: HV000032: Unable to initialize org.terasoluna.gfw.common.codelist.validator.ExistInCodeListValidatorForCharSequence.
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:858)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:622)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:65)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:167)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:134)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:155)
	at jp.co.ntt.atrs.app.b1.TicketSearchControllerTest.testSearchFlightForm(TicketSearchControllerTest.java:69)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:86)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:459)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:678)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:382)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)
Caused by: javax.validation.ValidationException: HV000032: Unable to initialize org.terasoluna.gfw.common.codelist.validator.ExistInCodeListValidatorForCharSequence.
	at org.hibernate.validator.internal.engine.constraintvalidation.ConstraintValidatorManager.initializeConstraint(ConstraintValidatorManager.java:264)
	at org.hibernate.validator.internal.engine.constraintvalidation.ConstraintValidatorManager.createAndInitializeValidator(ConstraintValidatorManager.java:183)
	at org.hibernate.validator.internal.engine.constraintvalidation.ConstraintValidatorManager.getInitializedValidator(ConstraintValidatorManager.java:122)
	at org.hibernate.validator.internal.engine.constraintvalidation.ConstraintTree.getConstraintValidatorNoUnwrapping(ConstraintTree.java:303)
	at org.hibernate.validator.internal.engine.constraintvalidation.ConstraintTree.getConstraintValidatorInstanceForAutomaticUnwrapping(ConstraintTree.java:244)
	at org.hibernate.validator.internal.engine.constraintvalidation.ConstraintTree.getInitializedConstraintValidator(ConstraintTree.java:163)
	at org.hibernate.validator.internal.engine.constraintvalidation.ConstraintTree.validateConstraints(ConstraintTree.java:116)
	at org.hibernate.validator.internal.engine.constraintvalidation.ConstraintTree.validateConstraints(ConstraintTree.java:87)
	at org.hibernate.validator.internal.metadata.core.MetaConstraint.validateConstraint(MetaConstraint.java:73)
	at org.hibernate.validator.internal.engine.ValidatorImpl.validateMetaConstraint(ValidatorImpl.java:617)
	at org.hibernate.validator.internal.engine.ValidatorImpl.validateConstraint(ValidatorImpl.java:580)
	at org.hibernate.validator.internal.engine.ValidatorImpl.validateConstraintsForSingleDefaultGroupElement(ValidatorImpl.java:524)
	at org.hibernate.validator.internal.engine.ValidatorImpl.validateConstraintsForDefaultGroup(ValidatorImpl.java:492)
	at org.hibernate.validator.internal.engine.ValidatorImpl.validateConstraintsForCurrentGroup(ValidatorImpl.java:457)
	at org.hibernate.validator.internal.engine.ValidatorImpl.validateInContext(ValidatorImpl.java:407)
	at org.hibernate.validator.internal.engine.ValidatorImpl.validate(ValidatorImpl.java:205)
	at org.springframework.validation.beanvalidation.SpringValidatorAdapter.validate(SpringValidatorAdapter.java:92)
	at org.springframework.validation.DataBinder.validate(DataBinder.java:869)
	at org.springframework.web.method.annotation.ModelAttributeMethodProcessor.validateIfApplicable(ModelAttributeMethodProcessor.java:164)
	at org.springframework.web.method.annotation.ModelAttributeMethodProcessor.resolveArgument(ModelAttributeMethodProcessor.java:111)
	at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:99)
	at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:161)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:128)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:832)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:743)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:961)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:895)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	... 33 more
Caused by: java.lang.NullPointerException
	at org.terasoluna.gfw.common.codelist.validator.AbstractExistInCodeListValidator.initialize(AbstractExistInCodeListValidator.java:55)
	at org.terasoluna.gfw.common.codelist.validator.AbstractExistInCodeListValidator.initialize(AbstractExistInCodeListValidator.java:35)
	at org.hibernate.validator.internal.engine.constraintvalidation.ConstraintValidatorManager.initializeConstraint(ConstraintValidatorManager.java:261)
	... 62 more





-------------------------------------------------------

java.lang.AssertionError: Status expected:<200> but was:<400>
	at org.springframework.test.util.AssertionErrors.fail(AssertionErrors.java:60)
	at org.springframework.test.util.AssertionErrors.assertEquals(AssertionErrors.java:89)
	at org.springframework.test.web.servlet.result.StatusResultMatchers$10.match(StatusResultMatchers.java:655)
	at org.springframework.test.web.servlet.MockMvc$1.andExpect(MockMvc.java:171)
	at jp.co.ntt.atrs.app.b1.TicketSearchControllerTest.testSearchFlightForm(TicketSearchControllerTest.java:74)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:86)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:459)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:678)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:382)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)





15:06:35,460 |-INFO in ch.qos.logback.classic.joran.JoranConfigurator@3b084709 - Registering current configuration as safe fallback point

date:2017-09-15 15:06:36	thread:main	user:	X-Track:	level:INFO 	logger:o.s.w.s.m.m.a.RequestMappingHandlerAdapter      	message:Looking for @ControllerAdvice: org.springframework.test.web.servlet.setup.StubWebApplicationContext@15d0c81b
aaaa

MockHttpServletRequest:
      HTTP Method = GET
      Request URI = /ticket/search
       Parameters = {}
          Headers = {}

Handler:
             Type = null

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = org.springframework.web.bind.UnsatisfiedServletRequestParameterException

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 400
    Error message = Parameter conditions "flightForm" OR "redo" OR "topForm" OR "form" not met for actual request parameters: 
          Headers = {}
     Content type = null
             Body = 
    Forwarded URL = null
   Redirected URL = null
          Cookies = []








-------------------------------------------------------


Junitテストでbatchを動かそうとしたらエラー

java.lang.NoSuchMethodError: org.springframework.util.Assert.notNull(Ljava/lang/Object;Ljava/util/function/Supplier;)V
	at org.springframework.test.context.support.ContextLoaderUtils.resolveContextConfigurationAttributes(ContextLoaderUtils.java:240)
	at org.springframework.test.context.support.AbstractTestContextBootstrapper.buildMergedContextConfiguration(AbstractTestContextBootstrapper.java:304)
	at org.springframework.test.context.support.AbstractTestContextBootstrapper.buildTestContext(AbstractTestContextBootstrapper.java:109)
	at org.springframework.test.context.TestContextManager.<init>(TestContextManager.java:135)
	at org.springframework.test.context.TestContextManager.<init>(TestContextManager.java:120)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTestContextManager(SpringJUnit4ClassRunner.java:151)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.<init>(SpringJUnit4ClassRunner.java:142)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
	at java.lang.reflect.Constructor.newInstance(Unknown Source)
	at org.junit.internal.builders.AnnotatedBuilder.buildRunner(AnnotatedBuilder.java:104)
	at org.junit.internal.builders.AnnotatedBuilder.runnerForClass(AnnotatedBuilder.java:86)
	at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:59)
	at org.junit.internal.builders.AllDefaultPossibilitiesBuilder.runnerForClass(AllDefaultPossibilitiesBuilder.java:26)
	at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:59)
	at org.junit.internal.requests.ClassRequest.getRunner(ClassRequest.java:33)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestLoader.createUnfilteredTest(JUnit4TestLoader.java:87)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestLoader.createTest(JUnit4TestLoader.java:73)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestLoader.loadTests(JUnit4TestLoader.java:46)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:523)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:761)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:461)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:207)


org.springframework.util.Assertライブラリがなかった


以下のライブラリを追加
<!-- https://mvnrepository.com/artifact/org.springframework/spring-core -->
	<dependency>
    	<groupId>org.springframework</groupId>
    	<artifactId>spring-core</artifactId>
    	<version>5.0.2.RELEASE</version>
	</dependency>


-------------------------------------------------------

Junitでspring batchのテストを実行しようとしたらエラー

[2017/12/22 10:11:52] [main] [o.s.t.c.TestContextManager] [ERROR] Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener@4d6e83] to prepare test instance [jp.co.nttdata.shinkin.batch.sample01.Sample01JobTaskletTest@6a17c4]
java.lang.IllegalStateException: Failed to load ApplicationContext
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:125) ~[spring-test-5.0.2.RELEASE.jar:5.0.2.RELEASE]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:107) ~[spring-test-5.0.2.RELEASE.jar:5.0.2.RELEASE]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:117) ~[spring-test-5.0.2.RELEASE.jar:5.0.2.RELEASE]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83) ~[spring-test-5.0.2.RELEASE.jar:5.0.2.RELEASE]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:242) ~[spring-test-5.0.2.RELEASE.jar:5.0.2.RELEASE]
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:227) [spring-test-5.0.2.RELEASE.jar:5.0.2.RELEASE]
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:289) [spring-test-5.0.2.RELEASE.jar:5.0.2.RELEASE]
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12) [junit-4.12.jar:4.12]
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:291) [spring-test-5.0.2.RELEASE.jar:5.0.2.RELEASE]
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:246) [spring-test-5.0.2.RELEASE.jar:5.0.2.RELEASE]
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97) [spring-test-5.0.2.RELEASE.jar:5.0.2.RELEASE]
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290) [junit-4.12.jar:4.12]
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71) [junit-4.12.jar:4.12]
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288) [junit-4.12.jar:4.12]
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58) [junit-4.12.jar:4.12]
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268) [junit-4.12.jar:4.12]
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61) [spring-test-5.0.2.RELEASE.jar:5.0.2.RELEASE]
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70) [spring-test-5.0.2.RELEASE.jar:5.0.2.RELEASE]
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363) [junit-4.12.jar:4.12]
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190) [spring-test-5.0.2.RELEASE.jar:5.0.2.RELEASE]
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:86) [.cp/:na]
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38) [.cp/:na]
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:539) [.cp/:na]
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:761) [.cp/:na]
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:461) [.cp/:na]
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:207) [.cp/:na]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sample01Job': Post-processing of FactoryBean's singleton object failed; nested exception is org.springframework.beans.FatalBeanException: Cannot register job configuration; nested exception is org.springframework.batch.core.configuration.DuplicateJobException: A job configuration with this name [sample01Job] was already registered
	at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:114) ~[spring-beans-5.0.2.RELEASE.jar:5.0.2.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1640) ~[spring-beans-5.0.2.RELEASE.jar:5.0.2.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.getObjectForBeanInstance(AbstractAutowireCapableBeanFactory.java:1178) ~[spring-beans-5.0.2.RELEASE.jar:5.0.2.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:258) ~[spring-beans-5.0.2.RELEASE.jar:5.0.2.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-5.0.2.RELEASE.jar:5.0.2.RELEASE]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:754) ~[spring-beans-5.0.2.RELEASE.jar:5.0.2.RELEASE]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:866) ~[spring-context-4.3.5.RELEASE.jar:4.3.5.RELEASE]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:542) ~[spring-context-4.3.5.RELEASE.jar:4.3.5.RELEASE]
	at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:128) ~[spring-test-5.0.2.RELEASE.jar:5.0.2.RELEASE]
	at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:60) ~[spring-test-5.0.2.RELEASE.jar:5.0.2.RELEASE]
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.delegateLoading(AbstractDelegatingSmartContextLoader.java:109) ~[spring-test-5.0.2.RELEASE.jar:5.0.2.RELEASE]
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.loadContext(AbstractDelegatingSmartContextLoader.java:246) ~[spring-test-5.0.2.RELEASE.jar:5.0.2.RELEASE]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99) ~[spring-test-5.0.2.RELEASE.jar:5.0.2.RELEASE]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117) ~[spring-test-5.0.2.RELEASE.jar:5.0.2.RELEASE]
	... 25 common frames omitted
Caused by: org.springframework.beans.FatalBeanException: Cannot register job configuration; nested exception is org.springframework.batch.core.configuration.DuplicateJobException: A job configuration with this name [sample01Job] was already registered
	at org.springframework.batch.core.configuration.support.JobRegistryBeanPostProcessor.postProcessAfterInitialization(JobRegistryBeanPostProcessor.java:150) ~[spring-batch-core-4.0.0.RELEASE.jar:4.0.0.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsAfterInitialization(AbstractAutowireCapableBeanFactory.java:438) ~[spring-beans-5.0.2.RELEASE.jar:5.0.2.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.postProcessObjectFromFactoryBean(AbstractAutowireCapableBeanFactory.java:1852) ~[spring-beans-5.0.2.RELEASE.jar:5.0.2.RELEASE]
	at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:111) ~[spring-beans-5.0.2.RELEASE.jar:5.0.2.RELEASE]
	... 38 common frames omitted
Caused by: org.springframework.batch.core.configuration.DuplicateJobException: A job configuration with this name [sample01Job] was already registered
	at org.springframework.batch.core.configuration.support.MapJobRegistry.register(MapJobRegistry.java:51) ~[spring-batch-core-4.0.0.RELEASE.jar:4.0.0.RELEASE]
	at org.springframework.batch.core.configuration.support.JobRegistryBeanPostProcessor.postProcessAfterInitialization(JobRegistryBeanPostProcessor.java:146) ~[spring-batch-core-4.0.0.RELEASE.jar:4.0.0.RELEASE]
	... 41 common frames omitted


http://forum.spring.io/forum/spring-projects/batch/37954-duplicatejobconfigurationexception

原因
<bean class="org.springframework.batch.core.configuration.support.JobRegistryBeanPostProcessor"
          p:jobRegistry-ref="jobRegistry"/>の競合

@ContextConfigurationでasync-batch-daemon.xmlとlaunch-context.xmlを一緒に読み込んでた。

解決
async-batch-daemon.xmlを削除


-------------------------------------------------------

Junitでspring batchのテストを実行しようとしたらエラー
再実行をしようとした

org.springframework.batch.core.repository.JobInstanceAlreadyCompleteException: A job instance already exists and is complete for parameters={age=40, name=Carson Wentz}.  If you want to run this job again, change the parameters.
	at org.springframework.batch.core.repository.support.SimpleJobRepository.createJobExecution(SimpleJobRepository.java:130)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:333)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.batch.core.repository.support.AbstractJobRepositoryFactoryBean$1.invoke(AbstractJobRepositoryFactoryBean.java:181)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:213)
	at com.sun.proxy.$Proxy18.createJobExecution(Unknown Source)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:131)
	at org.springframework.batch.test.JobLauncherTestUtils.launchJob(JobLauncherTestUtils.java:152)
	at jp.co.nttdata.shinkin.batch.sample01.Sample01JobTaskletTest.test(Sample01JobTaskletTest.java:54)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:73)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:83)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:86)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:539)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:761)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:461)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:207)

原因
ジョブの同一インスタンスが既に存在している
https://jira.spring.io/browse/BATCH-2383

解決
一意に定まるようなパラメータ設定を行うまたはイテレータの実装
http://javafascination.blogspot.jp/2011/01/job-instance-already-exists-and-is.html


https://numberformat.wordpress.com/2010/02/07/multiple-batch-runs-with-spring-batch/


-------------------------------------------------------

Junitでspring batchのテストを実行しようとしたらエラー


[2018/01/04 12:02:24] [main] [o.s.c.s.GenericApplicationContext] [WARN ] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'jobLauncherTestUtils': Unsatisfied dependency expressed through method 'setJob' parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.batch.core.Job' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
[2018/01/04 12:02:24] [main] [o.s.t.c.TestContextManager] [ERROR] Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener@1fbf16f] to prepare test instance [jp.co.nttdata.shinkin.service.sample01.Sample01JobTaskletTest@ab05ed]
java.lang.IllegalStateException: Failed to load ApplicationContext
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124) ~[spring-test-4.3.5.RELEASE.jar:4.3.5.RELEASE]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:83) ~[spring-test-4.3.5.RELEASE.jar:4.3.5.RELEASE]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:117) ~[spring-test-4.3.5.RELEASE.jar:4.3.5.RELEASE]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83) ~[spring-test-4.3.5.RELEASE.jar:4.3.5.RELEASE]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:230) ~[spring-test-4.3.5.RELEASE.jar:4.3.5.RELEASE]
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:228) [spring-test-4.3.5.RELEASE.jar:4.3.5.RELEASE]
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:287) [spring-test-4.3.5.RELEASE.jar:4.3.5.RELEASE]
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12) [junit.jar:4.12]
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:289) [spring-test-4.3.5.RELEASE.jar:4.3.5.RELEASE]
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:247) [spring-test-4.3.5.RELEASE.jar:4.3.5.RELEASE]
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:94) [spring-test-4.3.5.RELEASE.jar:4.3.5.RELEASE]
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290) [junit.jar:4.12]
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71) [junit.jar:4.12]
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288) [junit.jar:4.12]
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58) [junit.jar:4.12]
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268) [junit.jar:4.12]
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61) [spring-test-4.3.5.RELEASE.jar:4.3.5.RELEASE]
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70) [spring-test-4.3.5.RELEASE.jar:4.3.5.RELEASE]
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363) [junit.jar:4.12]
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:191) [spring-test-4.3.5.RELEASE.jar:4.3.5.RELEASE]
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:86) [.cp/:na]
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38) [.cp/:na]
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:539) [.cp/:na]
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:761) [.cp/:na]
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:461) [.cp/:na]
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:207) [.cp/:na]
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'jobLauncherTestUtils': Unsatisfied dependency expressed through method 'setJob' parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.batch.core.Job' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:667) ~[spring-beans-4.3.5.RELEASE.jar:4.3.5.RELEASE]
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:88) ~[spring-beans-4.3.5.RELEASE.jar:4.3.5.RELEASE]
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:366) ~[spring-beans-4.3.5.RELEASE.jar:4.3.5.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1225) ~[spring-beans-4.3.5.RELEASE.jar:4.3.5.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:552) ~[spring-beans-4.3.5.RELEASE.jar:4.3.5.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:483) ~[spring-beans-4.3.5.RELEASE.jar:4.3.5.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306) ~[spring-beans-4.3.5.RELEASE.jar:4.3.5.RELEASE]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230) ~[spring-beans-4.3.5.RELEASE.jar:4.3.5.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302) ~[spring-beans-4.3.5.RELEASE.jar:4.3.5.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197) ~[spring-beans-4.3.5.RELEASE.jar:4.3.5.RELEASE]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:759) ~[spring-beans-4.3.5.RELEASE.jar:4.3.5.RELEASE]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:866) ~[spring-context-4.3.5.RELEASE.jar:4.3.5.RELEASE]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:542) ~[spring-context-4.3.5.RELEASE.jar:4.3.5.RELEASE]
	at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:128) ~[spring-test-4.3.5.RELEASE.jar:4.3.5.RELEASE]
	at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:60) ~[spring-test-4.3.5.RELEASE.jar:4.3.5.RELEASE]
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.delegateLoading(AbstractDelegatingSmartContextLoader.java:108) ~[spring-test-4.3.5.RELEASE.jar:4.3.5.RELEASE]
	at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.loadContext(AbstractDelegatingSmartContextLoader.java:251) ~[spring-test-4.3.5.RELEASE.jar:4.3.5.RELEASE]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:98) ~[spring-test-4.3.5.RELEASE.jar:4.3.5.RELEASE]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:116) ~[spring-test-4.3.5.RELEASE.jar:4.3.5.RELEASE]
	... 25 common frames omitted
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.batch.core.Job' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1474) ~[spring-beans-4.3.5.RELEASE.jar:4.3.5.RELEASE]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1102) ~[spring-beans-4.3.5.RELEASE.jar:4.3.5.RELEASE]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1064) ~[spring-beans-4.3.5.RELEASE.jar:4.3.5.RELEASE]
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:659) ~[spring-beans-4.3.5.RELEASE.jar:4.3.5.RELEASE]
	... 43 common frames omitted


https://www.mkyong.com/spring-batch/nosuchbeandefinitionexception-no-qualifying-bean-of-type-joblaunchertestutils/


原因
ジョブの設定を行っているxmlファイルを読み込んでいなかった
→No qualifying bean of type 'org.springframework.batch.core.Job'が反応していた

-------------------------------------------------------

20180118
pandocのインストール先
変わってるっぽい？
C:\Program Files\Pandoc



-------------------------------------------------------
状況
STS(eclipse)にてmavenのビルドからjarファイルを作成しようとしたらエラー

maven ビルドにて
ゴールにclean dependency:copy-dependencies -DoutputDirectory=lib packageを指定
↑こうすることでアプリのjar以外に、依存するjarファイルも一式作成される

エラー内容

[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building TERASOLUNA Batch Framework for Java (5.x) Blank Project 1.0.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[WARNING] The POM for jp.co.nttdata.shinkin.batch:MultiStructure-child1:jar:1.0-SNAPSHOT is missing, no dependency information available
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 0.966 s
[INFO] Finished at: 2018-01-23T11:35:18+09:00
[INFO] Final Memory: 8M/20M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal on project shinkin-batch: Could not resolve dependencies for project jp.co.nttdata.shinkin.batch:shinkin-batch:jar:1.0.0-SNAPSHOT: Failure to find jp.co.nttdata.shinkin.batch:MultiStructure-child1:jar:1.0-SNAPSHOT in http://repo.terasoluna.org/nexus/content/repositories/terasoluna-batch-snapshots/ was cached in the local repository, resolution will not be reattempted until the update interval of terasoluna-batch-snapshots has elapsed or updates are forced -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException


原因
mavenでブランクプロジェクトを作成した時のプロジェクト名を後から変更した。
その後ビルドしようとしたときに、元のプロジェクト名の状態が残っていたため？
maven のアーキタイプ
というかpom.xmlを直していなかった。（マルチプロジェクト構成にしていたため親子関係をpom.xmlに記載
リファクタリングでさすがにそこまでは直してくれなかった・・・


解決策
http://ponkotsusechan.hatenadiary.jp/entry/2016/02/01/173000
もあったけど違った
各親と子のpom.xmlの変更したプロジェクト名の箇所を変更

新たな問題発生

[INFO] Scanning for projects...
[ERROR] [ERROR] Some problems were encountered while processing the POMs:
[ERROR] Child module C:\gitbucket\IB2020_group\MultiStructure\MultiStructure-parent\TERA5x_batch-env of C:\gitbucket\IB2020_group\MultiStructure\MultiStructure-parent\pom.xml does not exist @ 
[ERROR] Child module C:\gitbucket\IB2020_group\MultiStructure\MultiStructure-parent\TERA5x_batch-app of C:\gitbucket\IB2020_group\MultiStructure\MultiStructure-parent\pom.xml does not exist @ 
 @ 
[ERROR] The build could not read 1 project -> [Help 1]
[ERROR]   
[ERROR]   The project jp.co.nttdata.shinkin.batch:TERA5x_batch:1.0-SNAPSHOT (C:\gitbucket\IB2020_group\MultiStructure\MultiStructure-parent\pom.xml) has 2 errors
[ERROR]     Child module C:\gitbucket\IB2020_group\MultiStructure\MultiStructure-parent\TERA5x_batch-env of C:\gitbucket\IB2020_group\MultiStructure\MultiStructure-parent\pom.xml does not exist
[ERROR]     Child module C:\gitbucket\IB2020_group\MultiStructure\MultiStructure-parent\TERA5x_batch-app of C:\gitbucket\IB2020_group\MultiStructure\MultiStructure-parent\pom.xml does not exist
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/ProjectBuildingException

フォルダ名も変えてなかった。
.m2のリポジトリ内の対象フォルダを消して再度実行


[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building TERASOLUNA Batch Framework for Java (5.x) Blank Project 1.0.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[WARNING] The POM for jp.co.nttdata.shinkin.batch:TERA5x_batch-env:jar:1.0-SNAPSHOT is missing, no dependency information available
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1.170 s
[INFO] Finished at: 2018-01-23T13:57:00+09:00
[INFO] Final Memory: 8M/20M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal on project TERA5x_batch-app: Could not resolve dependencies for project jp.co.nttdata.shinkin.batch:TERA5x_batch-app:jar:1.0.0-SNAPSHOT: Failure to find jp.co.nttdata.shinkin.batch:TERA5x_batch-env:jar:1.0-SNAPSHOT in http://repo.terasoluna.org/nexus/content/repositories/terasoluna-batch-snapshots/ was cached in the local repository, resolution will not be reattempted until the update interval of terasoluna-batch-snapshots has elapsed or updates are forced -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException

.m2のリポジトリ内の対象フォルダを消して再度実行

m2リポジトリ上に存在しないものをdependencyしていた。つまり子のjar。
dependencyからはずす

[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building TERASOLUNA Batch Framework for Java (5.x) Blank Project 1.0.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ TERA5x_batch-app ---
[INFO] Deleting C:\gitbucket\IB2020_group\MultiStructure\TERA5x_batch\TERA5x_batch-app\target
[INFO] 
[INFO] --- maven-dependency-plugin:2.8:copy-dependencies (default-cli) @ TERA5x_batch-app ---
[INFO] Copying junit-3.8.1.jar to C:\gitbucket\IB2020_group\MultiStructure\TERA5x_batch\TERA5x_batch-app\lib\junit-3.8.1.jar
[INFO] Copying terasoluna-batch-5.0.0.RELEASE.jar to C:\gitbucket\IB2020_group\MultiStructure\TERA5x_batch\TERA5x_batch-app\lib\terasoluna-batch-5.0.0.RELEASE.jar
[INFO] jettison-1.2.jar already exists in destination.
[INFO] mybatis-typehandlers-jsr310-1.0.2.jar already exists in destination.
[INFO] slf4j-api-1.7.22.jar already exists in destination.
[INFO] logback-core-1.1.8.jar already exists in destination.
[INFO] h2-1.4.193.jar already exists in destination.
[INFO] spring-batch-core-3.0.7.RELEASE.jar already exists in destination.
[INFO] commons-dbcp2-2.1.1.jar already exists in destination.
[INFO] hibernate-validator-5.2.4.Final.jar already exists in destination.
[INFO] javax.batch-api-1.0.1.jar already exists in destination.
[INFO] spring-aop-4.3.5.RELEASE.jar already exists in destination.
[INFO] jcl-over-slf4j-1.7.22.jar already exists in destination.
[INFO] xpp3_min-1.1.4c.jar already exists in destination.
[INFO] spring-retry-1.1.5.RELEASE.jar already exists in destination.
[INFO] logback-classic-1.1.8.jar already exists in destination.
[INFO] postgresql-9.4.1212.jre7.jar already exists in destination.
[INFO] mybatis-spring-1.3.1.jar already exists in destination.
[INFO] spring-beans-4.3.5.RELEASE.jar already exists in destination.
[INFO] xmlpull-1.1.3.1.jar already exists in destination.
[INFO] xstream-1.4.9.jar already exists in destination.
[INFO] spring-batch-infrastructure-3.0.7.RELEASE.jar already exists in destination.
[INFO] javax.inject-1.jar already exists in destination.
[INFO] spring-expression-4.3.5.RELEASE.jar already exists in destination.
[INFO] mybatis-3.4.2.jar already exists in destination.
[INFO] javax.el-3.0.0.jar already exists in destination.
[INFO] spring-context-4.3.5.RELEASE.jar already exists in destination.
[INFO] spring-core-4.3.5.RELEASE.jar already exists in destination.
[INFO] spring-tx-4.3.5.RELEASE.jar already exists in destination.
[INFO] spring-jdbc-4.3.5.RELEASE.jar already exists in destination.
[INFO] com.ibm.jbatch-tck-spi-1.0.jar already exists in destination.
[INFO] db2jcc4-10.1.jar already exists in destination.
[INFO] validation-api-1.1.0.Final.jar already exists in destination.
[INFO] classmate-1.3.3.jar already exists in destination.
[INFO] commons-pool2-2.4.2.jar already exists in destination.
[INFO] lombok-1.16.12.jar already exists in destination.
[INFO] jboss-logging-3.3.0.Final.jar already exists in destination.
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ TERA5x_batch-app ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 19 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.5.1:compile (default-compile) @ TERA5x_batch-app ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 16 source files to C:\gitbucket\IB2020_group\MultiStructure\TERA5x_batch\TERA5x_batch-app\target\classes
[INFO] -------------------------------------------------------------
[ERROR] COMPILATION ERROR : 
[INFO] -------------------------------------------------------------
[ERROR] No compiler is provided in this environment. Perhaps you are running on a JRE rather than a JDK?
[INFO] 1 error
[INFO] -------------------------------------------------------------
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 4.335 s
[INFO] Finished at: 2018-01-23T14:06:20+09:00
[INFO] Final Memory: 13M/32M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.5.1:compile (default-compile) on project TERA5x_batch-app: Compilation failure
[ERROR] No compiler is provided in this environment. Perhaps you are running on a JRE rather than a JDK?
[ERROR] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException

https://qiita.com/takaaki4cards/items/639b4cd7544944d5e5c4
JREをJDKに変更


[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building TERASOLUNA Batch Framework for Java (5.x) Blank Project 1.0.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ TERA5x_batch-app ---
[INFO] Deleting C:\gitbucket\IB2020_group\MultiStructure\TERA5x_batch\TERA5x_batch-app\target
[INFO] 
[INFO] --- maven-dependency-plugin:2.8:copy-dependencies (default-cli) @ TERA5x_batch-app ---
[INFO] jettison-1.2.jar already exists in destination.
[INFO] mybatis-typehandlers-jsr310-1.0.2.jar already exists in destination.
[INFO] slf4j-api-1.7.22.jar already exists in destination.
[INFO] logback-core-1.1.8.jar already exists in destination.
[INFO] h2-1.4.193.jar already exists in destination.
[INFO] spring-batch-core-3.0.7.RELEASE.jar already exists in destination.
[INFO] commons-dbcp2-2.1.1.jar already exists in destination.
[INFO] hibernate-validator-5.2.4.Final.jar already exists in destination.
[INFO] javax.batch-api-1.0.1.jar already exists in destination.
[INFO] spring-aop-4.3.5.RELEASE.jar already exists in destination.
[INFO] jcl-over-slf4j-1.7.22.jar already exists in destination.
[INFO] xpp3_min-1.1.4c.jar already exists in destination.
[INFO] junit-3.8.1.jar already exists in destination.
[INFO] spring-retry-1.1.5.RELEASE.jar already exists in destination.
[INFO] logback-classic-1.1.8.jar already exists in destination.
[INFO] postgresql-9.4.1212.jre7.jar already exists in destination.
[INFO] mybatis-spring-1.3.1.jar already exists in destination.
[INFO] spring-beans-4.3.5.RELEASE.jar already exists in destination.
[INFO] xmlpull-1.1.3.1.jar already exists in destination.
[INFO] xstream-1.4.9.jar already exists in destination.
[INFO] spring-batch-infrastructure-3.0.7.RELEASE.jar already exists in destination.
[INFO] javax.inject-1.jar already exists in destination.
[INFO] spring-expression-4.3.5.RELEASE.jar already exists in destination.
[INFO] mybatis-3.4.2.jar already exists in destination.
[INFO] javax.el-3.0.0.jar already exists in destination.
[INFO] spring-context-4.3.5.RELEASE.jar already exists in destination.
[INFO] spring-core-4.3.5.RELEASE.jar already exists in destination.
[INFO] terasoluna-batch-5.0.0.RELEASE.jar already exists in destination.
[INFO] spring-tx-4.3.5.RELEASE.jar already exists in destination.
[INFO] spring-jdbc-4.3.5.RELEASE.jar already exists in destination.
[INFO] com.ibm.jbatch-tck-spi-1.0.jar already exists in destination.
[INFO] db2jcc4-10.1.jar already exists in destination.
[INFO] validation-api-1.1.0.Final.jar already exists in destination.
[INFO] classmate-1.3.3.jar already exists in destination.
[INFO] commons-pool2-2.4.2.jar already exists in destination.
[INFO] lombok-1.16.12.jar already exists in destination.
[INFO] jboss-logging-3.3.0.Final.jar already exists in destination.
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ TERA5x_batch-app ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 19 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.5.1:compile (default-compile) @ TERA5x_batch-app ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 16 source files to C:\gitbucket\IB2020_group\MultiStructure\TERA5x_batch\TERA5x_batch-app\target\classes
[INFO] -------------------------------------------------------------
[ERROR] COMPILATION ERROR : 
[INFO] -------------------------------------------------------------
[ERROR] /C:/gitbucket/IB2020_group/MultiStructure/TERA5x_batch/TERA5x_batch-app/src/main/java/jp/co/nttdata/shinkin/service/sample03/Sample03JobServiceImpl.java:[12,28] パッケージcom.brainsellers.xmlは存在しません
[ERROR] /C:/gitbucket/IB2020_group/MultiStructure/TERA5x_batch/TERA5x_batch-app/src/main/java/jp/co/nttdata/shinkin/service/sample03/Sample03JobServiceImpl.java:[13,35] パッケージcom.brainsellers.xml.commonは存在しません
[ERROR] /C:/gitbucket/IB2020_group/MultiStructure/TERA5x_batch/TERA5x_batch-app/src/main/java/jp/co/nttdata/shinkin/service/sample03/Sample03JobServiceImpl.java:[14,38] パッケージcom.brainsellers.xml.datatypesは存在しません
[ERROR] /C:/gitbucket/IB2020_group/MultiStructure/TERA5x_batch/TERA5x_batch-app/src/main/java/jp/co/nttdata/shinkin/service/sample03/Sample03JobServiceImpl.java:[15,38] パッケージcom.brainsellers.xml.datatypesは存在しません
[ERROR] /C:/gitbucket/IB2020_group/MultiStructure/TERA5x_batch/TERA5x_batch-app/src/main/java/jp/co/nttdata/shinkin/service/sample03/Sample03JobServiceImpl.java:[132,13] シンボルを見つけられません
  シンボル:   クラス RecordType
  場所: クラス jp.co.nttdata.shinkin.service.sample03.Sample03JobServiceImpl
[INFO] 5 errors 
[INFO] -------------------------------------------------------------
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 9.990 s
[INFO] Finished at: 2018-01-23T14:56:55+09:00
[INFO] Final Memory: 18M/47M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.5.1:compile (default-compile) on project TERA5x_batch-app: Compilation failure: Compilation failure:
[ERROR] /C:/gitbucket/IB2020_group/MultiStructure/TERA5x_batch/TERA5x_batch-app/src/main/java/jp/co/nttdata/shinkin/service/sample03/Sample03JobServiceImpl.java:[12,28] パッケージcom.brainsellers.xmlは存在しません
[ERROR] /C:/gitbucket/IB2020_group/MultiStructure/TERA5x_batch/TERA5x_batch-app/src/main/java/jp/co/nttdata/shinkin/service/sample03/Sample03JobServiceImpl.java:[13,35] パッケージcom.brainsellers.xml.commonは存在しません
[ERROR] /C:/gitbucket/IB2020_group/MultiStructure/TERA5x_batch/TERA5x_batch-app/src/main/java/jp/co/nttdata/shinkin/service/sample03/Sample03JobServiceImpl.java:[14,38] パッケージcom.brainsellers.xml.datatypesは存在しません
[ERROR] /C:/gitbucket/IB2020_group/MultiStructure/TERA5x_batch/TERA5x_batch-app/src/main/java/jp/co/nttdata/shinkin/service/sample03/Sample03JobServiceImpl.java:[15,38] パッケージcom.brainsellers.xml.datatypesは存在しません
[ERROR] /C:/gitbucket/IB2020_group/MultiStructure/TERA5x_batch/TERA5x_batch-app/src/main/java/jp/co/nttdata/shinkin/service/sample03/Sample03JobServiceImpl.java:[132,13] シンボルを見つけられません
[ERROR] シンボル:   クラス RecordType
[ERROR] 場所: クラス jp.co.nttdata.shinkin.service.sample03.Sample03JobServiceImpl
[ERROR] -> [Help 1]
[ERROR] 


http://d.hatena.ne.jp/Kazuhira/20110519/1305811057
依存関係の定義の際にscopeが必要
スコープ名	意味
compile	コンパイル時に必要な依存関係。scope省略時は、これがデフォルト。コンパイル時に必要なのだから、当然テスト、実行時にも必要
provided	コンパイル時には必要だけど、実行時には実行環境より提供されるような依存関係。servlet-api.jarなど
runtime	コンパイル時には不要だけど、実行時には必要な依存関係。JDBCドライバなど
test	アプリケーション本体には不要だけど、テストには必要な依存関係
system	providedとほぼ同じですが、JARのパスを明示的に指定する必要があります


mvn install:install-file ^
    -Dfile=bsxml.jar ^
    -DgroupId=com.brainsellers ^
    -DartifactId=bsxml ^
    -Dversion=5.0 ^
    -Dpackaging=jar ^
    -DgeneratePom=true

mavenに無いやつだったのでローカルで登録した


[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building TERASOLUNA Batch Framework for Java (5.x) Blank Project 1.0.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ TERA5x_batch-app ---
[INFO] Deleting C:\gitbucket\IB2020_group\MultiStructure\TERA5x_batch\TERA5x_batch-app\target
[INFO] 
[INFO] --- maven-dependency-plugin:2.8:copy-dependencies (default-cli) @ TERA5x_batch-app ---
[INFO] Copying bcprov-jdk15on-5.0.jar to C:\gitbucket\IB2020_group\MultiStructure\TERA5x_batch\TERA5x_batch-app\lib\bcprov-jdk15on-5.0.jar
[INFO] Copying bcpkix-jdk15on-5.0.jar to C:\gitbucket\IB2020_group\MultiStructure\TERA5x_batch\TERA5x_batch-app\lib\bcpkix-jdk15on-5.0.jar
[INFO] Copying bspdf-5.0.jar to C:\gitbucket\IB2020_group\MultiStructure\TERA5x_batch\TERA5x_batch-app\lib\bspdf-5.0.jar
[INFO] Copying bslib-5.0.jar to C:\gitbucket\IB2020_group\MultiStructure\TERA5x_batch\TERA5x_batch-app\lib\bslib-5.0.jar
[INFO] Copying bsxml-5.0.jar to C:\gitbucket\IB2020_group\MultiStructure\TERA5x_batch\TERA5x_batch-app\lib\bsxml-5.0.jar
[INFO] jettison-1.2.jar already exists in destination.
[INFO] mybatis-typehandlers-jsr310-1.0.2.jar already exists in destination.
[INFO] slf4j-api-1.7.22.jar already exists in destination.
[INFO] logback-core-1.1.8.jar already exists in destination.
[INFO] h2-1.4.193.jar already exists in destination.
[INFO] spring-batch-core-3.0.7.RELEASE.jar already exists in destination.
[INFO] commons-dbcp2-2.1.1.jar already exists in destination.
[INFO] hibernate-validator-5.2.4.Final.jar already exists in destination.
[INFO] javax.batch-api-1.0.1.jar already exists in destination.
[INFO] spring-aop-4.3.5.RELEASE.jar already exists in destination.
[INFO] jcl-over-slf4j-1.7.22.jar already exists in destination.
[INFO] xpp3_min-1.1.4c.jar already exists in destination.
[INFO] junit-3.8.1.jar already exists in destination.
[INFO] spring-retry-1.1.5.RELEASE.jar already exists in destination.
[INFO] logback-classic-1.1.8.jar already exists in destination.
[INFO] postgresql-9.4.1212.jre7.jar already exists in destination.
[INFO] mybatis-spring-1.3.1.jar already exists in destination.
[INFO] spring-beans-4.3.5.RELEASE.jar already exists in destination.
[INFO] xmlpull-1.1.3.1.jar already exists in destination.
[INFO] xstream-1.4.9.jar already exists in destination.
[INFO] spring-batch-infrastructure-3.0.7.RELEASE.jar already exists in destination.
[INFO] javax.inject-1.jar already exists in destination.
[INFO] spring-expression-4.3.5.RELEASE.jar already exists in destination.
[INFO] mybatis-3.4.2.jar already exists in destination.
[INFO] javax.el-3.0.0.jar already exists in destination.
[INFO] spring-context-4.3.5.RELEASE.jar already exists in destination.
[INFO] spring-core-4.3.5.RELEASE.jar already exists in destination.
[INFO] terasoluna-batch-5.0.0.RELEASE.jar already exists in destination.
[INFO] spring-tx-4.3.5.RELEASE.jar already exists in destination.
[INFO] spring-jdbc-4.3.5.RELEASE.jar already exists in destination.
[INFO] com.ibm.jbatch-tck-spi-1.0.jar already exists in destination.
[INFO] db2jcc4-10.1.jar already exists in destination.
[INFO] validation-api-1.1.0.Final.jar already exists in destination.
[INFO] classmate-1.3.3.jar already exists in destination.
[INFO] commons-pool2-2.4.2.jar already exists in destination.
[INFO] lombok-1.16.12.jar already exists in destination.
[INFO] jboss-logging-3.3.0.Final.jar already exists in destination.
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ TERA5x_batch-app ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 19 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.5.1:compile (default-compile) @ TERA5x_batch-app ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 16 source files to C:\gitbucket\IB2020_group\MultiStructure\TERA5x_batch\TERA5x_batch-app\target\classes
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ TERA5x_batch-app ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 1 resource
[INFO] 
[INFO] --- maven-compiler-plugin:3.5.1:testCompile (default-testCompile) @ TERA5x_batch-app ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.12.4:test (default-test) @ TERA5x_batch-app ---
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-booter/2.12.4/surefire-booter-2.12.4.pom
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-booter/2.12.4/surefire-booter-2.12.4.pom (3 KB at 1.8 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-api/2.12.4/surefire-api-2.12.4.pom
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-api/2.12.4/surefire-api-2.12.4.pom (3 KB at 9.7 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/maven-surefire-common/2.12.4/maven-surefire-common-2.12.4.pom
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/maven-surefire-common/2.12.4/maven-surefire-common-2.12.4.pom (6 KB at 18.4 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/plugin-tools/maven-plugin-annotations/3.1/maven-plugin-annotations-3.1.pom
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/plugin-tools/maven-plugin-annotations/3.1/maven-plugin-annotations-3.1.pom (2 KB at 6.3 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/plugin-tools/maven-plugin-tools/3.1/maven-plugin-tools-3.1.pom
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/plugin-tools/maven-plugin-tools/3.1/maven-plugin-tools-3.1.pom (16 KB at 46.6 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/maven-toolchain/2.0.9/maven-toolchain-2.0.9.pom
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/maven-toolchain/2.0.9/maven-toolchain-2.0.9.pom (4 KB at 14.0 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/commons/commons-lang3/3.1/commons-lang3-3.1.pom
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/commons/commons-lang3/3.1/commons-lang3-3.1.pom (17 KB at 61.4 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/shared/maven-common-artifact-filters/1.3/maven-common-artifact-filters-1.3.pom
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/shared/maven-common-artifact-filters/1.3/maven-common-artifact-filters-1.3.pom (4 KB at 14.8 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-booter/2.12.4/surefire-booter-2.12.4.jar
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-booter/2.12.4/surefire-booter-2.12.4.jar (34 KB at 96.2 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-api/2.12.4/surefire-api-2.12.4.jar
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/surefire-api/2.12.4/surefire-api-2.12.4.jar (115 KB at 278.7 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/maven-surefire-common/2.12.4/maven-surefire-common-2.12.4.jar
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/surefire/maven-surefire-common/2.12.4/maven-surefire-common-2.12.4.jar (257 KB at 542.2 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/commons/commons-lang3/3.1/commons-lang3-3.1.jar
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/commons/commons-lang3/3.1/commons-lang3-3.1.jar (309 KB at 646.5 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/shared/maven-common-artifact-filters/1.3/maven-common-artifact-filters-1.3.jar
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/shared/maven-common-artifact-filters/1.3/maven-common-artifact-filters-1.3.jar (31 KB at 122.8 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-utils/3.0.8/plexus-utils-3.0.8.jar
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-utils/3.0.8/plexus-utils-3.0.8.jar (227 KB at 570.2 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/reporting/maven-reporting-api/2.0.9/maven-reporting-api-2.0.9.jar
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/reporting/maven-reporting-api/2.0.9/maven-reporting-api-2.0.9.jar (10 KB at 40.7 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/maven-toolchain/2.0.9/maven-toolchain-2.0.9.jar
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/maven-toolchain/2.0.9/maven-toolchain-2.0.9.jar (38 KB at 143.7 KB/sec)
[INFO] Downloading: https://repo.maven.apache.org/maven2/org/apache/maven/plugin-tools/maven-plugin-annotations/3.1/maven-plugin-annotations-3.1.jar
[INFO] Downloaded: https://repo.maven.apache.org/maven2/org/apache/maven/plugin-tools/maven-plugin-annotations/3.1/maven-plugin-annotations-3.1.jar (14 KB at 56.6 KB/sec)
[INFO] 
[INFO] --- maven-jar-plugin:3.0.2:jar (default-jar) @ TERA5x_batch-app ---
[INFO] Building jar: C:\gitbucket\IB2020_group\MultiStructure\TERA5x_batch\TERA5x_batch-app\target\TERA5x_batch-app-1.0.0-SNAPSHOT.jar
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 17.054 s
[INFO] Finished at: 2018-01-23T17:23:53+09:00
[INFO] Final Memory: 23M/102M
[INFO] ------------------------------------------------------------------------
●済
-------------------------------------------------------
マルチプロジェクト構成の時のコンパイルと実行方法
terabatch
mvn clean dependency:copy-dependencies -DoutputDirectory=lib package
java -cp "app/*;licence/*;lib/*;lib/biz/*" org.terasoluna.batch.async.db.AsyncBatchDaemon

親からの実行
mvn -P TERA5x_batch-env,systemIn clean dependency:copy-dependencies -DoutputDirectory=lib package

子からの実行
mvn -P develop clean dependency:copy-dependencies -DoutputDirectory=lib package


マルチプロジェクト構成時、子同士で依存関係がある時は
親からコンパイルする必要がある

子でコンパイルを行うと以下のエラーが発生する
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building TERASOLUNA Batch Framework for Java (5.x) Blank Project 1.0.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] Downloading: http://repo.terasoluna.org/nexus/content/repositories/terasoluna-batch-snapshots/jp/co/nttdata/shinkin/batch/TERA5x_batch-env/1.0-SNAPSHOT/maven-metadata.xml
[INFO] Downloading: http://repo.terasoluna.org/nexus/content/repositories/terasoluna-batch-snapshots/jp/co/nttdata/shinkin/batch/TERA5x_batch-env/1.0-SNAPSHOT/TERA5x_batch-env-1.0-SNAPSHOT.pom
[WARNING] The POM for jp.co.nttdata.shinkin.batch:TERA5x_batch-env:jar:1.0-SNAPSHOT is missing, no dependency information available
[INFO] Downloading: http://repo.terasoluna.org/nexus/content/repositories/terasoluna-batch-snapshots/jp/co/nttdata/shinkin/batch/TERA5x_batch-env/1.0-SNAPSHOT/TERA5x_batch-env-1.0-SNAPSHOT.jar
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 3.110 s
[INFO] Finished at: 2018-01-25T11:35:59+09:00
[INFO] Final Memory: 10M/25M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal on project TERA5x_batch-app: Could not resolve dependencies for project jp.co.nttdata.shinkin.batch:TERA5x_batch-app:jar:1.0.0-SNAPSHOT: Could not find artifact jp.co.nttdata.shinkin.batch:TERA5x_batch-env:jar:1.0-SNAPSHOT in terasoluna-batch-snapshots (http://repo.terasoluna.org/nexus/content/repositories/terasoluna-batch-snapshots/) -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException

jenkinsも親からUTを行う
●済
-------------------------------------------------------
mavenでjarを作ってローカル起動した時にエラー

https://github.com/spring-projects/spring-boot/issues/8986

java.io.FileNotFoundException: class path resource [jp/co/nttdata/shinkin/batch/sample03/sample03layoutPDF.xml] cannot be resolved to absolute file path because it does not reside in the file system: jar:file:/C:/work/TERA5x/app/TERA5x_batch-app-1.0.0-SNAPSHOT.jar!/jp/co/nttdata/shinkin/batch/sample03/sample03layoutPDF.xml
        at org.springframework.util.ResourceUtils.getFile(ResourceUtils.java:218)
        at org.springframework.core.io.AbstractFileResolvingResource.getFile(AbstractFileResolvingResource.java:52)
        at jp.co.nttdata.shinkin.service.sharedservice.InputFileImpl.inputLayoutXml(InputFileImpl.java:31)
        at jp.co.nttdata.shinkin.service.sample03.Sample03JobServiceImpl.createPDF(Sample03JobServiceImpl.java:89)
        at jp.co.nttdata.shinkin.service.sample03.Sample03JobServiceImpl.makePDFfile(Sample03JobServiceImpl.java:55)
        at jp.co.nttdata.shinkin.batch.sample03.Sample03JobTasklet.execute(Sample03JobTasklet.java:69)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:333)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
        at org.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:133)
        at org.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:121)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
        at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:213)
        at com.sun.proxy.$Proxy25.execute(Unknown Source)
        at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:406)
        at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:330)
        at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:133)
        at org.springframework.batch.core.step.tasklet.TaskletStep$2.doInChunkContext(TaskletStep.java:271)
        at org.springframework.batch.core.scope.context.StepContextRepeatCallback.doInIteration(StepContextRepeatCallback.java:81)
        at org.springframework.batch.repeat.support.RepeatTemplate.getNextResult(RepeatTemplate.java:374)
        at org.springframework.batch.repeat.support.RepeatTemplate.executeInternal(RepeatTemplate.java:215)
        at org.springframework.batch.repeat.support.RepeatTemplate.iterate(RepeatTemplate.java:144)
        at org.springframework.batch.core.step.tasklet.TaskletStep.doExecute(TaskletStep.java:257)
        at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:200)
        at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:148)
        at org.springframework.batch.core.job.flow.JobFlowExecutor.executeStep(JobFlowExecutor.java:64)
        at org.springframework.batch.core.job.flow.support.state.StepState.handle(StepState.java:67)
        at org.springframework.batch.core.job.flow.support.SimpleFlow.resume(SimpleFlow.java:169)
        at org.springframework.batch.core.job.flow.support.SimpleFlow.start(SimpleFlow.java:144)
        at org.springframework.batch.core.job.flow.FlowJob.doExecute(FlowJob.java:134)
        at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:306)
        at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:135)
        at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)
        at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:128)
        at org.springframework.batch.core.launch.support.SimpleJobOperator.start(SimpleJobOperator.java:314)
        at org.terasoluna.batch.async.db.JobRequestPollTask.executeJob(JobRequestPollTask.java:227)
        at org.terasoluna.batch.async.db.JobRequestPollTask.lambda$0(JobRequestPollTask.java:203)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
        at java.lang.Thread.run(Unknown Source)


sample03layoutPDF.xmlが二重に存在していたため
⇒マルチプロジェクト構成にするときに両方のプロジェクトに置いてしまった

片方消して・・・違った

リソースがファイルであると仮定するのではなく、入力ストリームを使用して読み取る必要があります。
https://github.com/spring-projects/spring-boot/issues/10983
https://coderanch.com/t/474047/framework/Spring-find-file-classpath-JAR

STS上では正常に起動するが、jarに固めた状態から起動でエラーが発生する
[2018/01/25 13:48:51] [daemonTaskExecutor-1] [j.c.n.s.s.s.Sample03JobServiceImpl] [INFO ] □□□□□□PDF作成中開始□□□□□□
one★★★★★★★★★★★★★★★★★★★★
jp/co/nttdata/shinkin/batch/sample03/sample03layoutPDF.xml
two★★★★★★★★★★★★★★★★★★★★
file:/C:/work/TERA5x/app/TERA5x_batch-app-1.0.0-SNAPSHOT.jar!/jp/co/nttdata/shinkin/batch/sample03/sample03layoutPDF.xml
three★★★★★★★★★★★★★★★★★★★★
four★★★★★★★★★★★★★★★★★★★★
java.io.FileNotFoundException: file:\C:\work\TERA5x\app\TERA5x_batch-app-1.0.0-SNAPSHOT.jar!\jp\co\nttdata\shinkin\batch\sample03\sample03layoutPDF.xml (ファイル名、ディレクトリ名、またはボリューム ラベルの構文が間違ってい
        at java.io.FileInputStream.open0(Native Method)
        at java.io.FileInputStream.open(Unknown Source)
        at java.io.FileInputStream.<init>(Unknown Source)
        at jp.co.nttdata.shinkin.service.sharedservice.InputFileImpl.inputLayoutXml(InputFileImpl.java:39)
        at jp.co.nttdata.shinkin.service.sample03.Sample03JobServiceImpl.createPDF(Sample03JobServiceImpl.java:89)
        at jp.co.nttdata.shinkin.service.sample03.Sample03JobServiceImpl.makePDFfile(Sample03JobServiceImpl.java:55)
        at jp.co.nttdata.shinkin.batch.sample03.Sample03JobTasklet.execute(Sample03JobTasklet.java:69)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:333)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
        at org.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:133)
        at org.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:121)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
        at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:213)
        at com.sun.proxy.$Proxy24.execute(Unknown Source)
        at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:406)
        at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:330)
        at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:133)
        at org.springframework.batch.core.step.tasklet.TaskletStep$2.doInChunkContext(TaskletStep.java:271)
        at org.springframework.batch.core.scope.context.StepContextRepeatCallback.doInIteration(StepContextRepeatCallback.java:81)
        at org.springframework.batch.repeat.support.RepeatTemplate.getNextResult(RepeatTemplate.java:374)
        at org.springframework.batch.repeat.support.RepeatTemplate.executeInternal(RepeatTemplate.java:215)
        at org.springframework.batch.repeat.support.RepeatTemplate.iterate(RepeatTemplate.java:144)
        at org.springframework.batch.core.step.tasklet.TaskletStep.doExecute(TaskletStep.java:257)
        at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:200)
        at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:148)
        at org.springframework.batch.core.job.flow.JobFlowExecutor.executeStep(JobFlowExecutor.java:64)
        at org.springframework.batch.core.job.flow.support.state.StepState.handle(StepState.java:67)
        at org.springframework.batch.core.job.flow.support.SimpleFlow.resume(SimpleFlow.java:169)
        at org.springframework.batch.core.job.flow.support.SimpleFlow.start(SimpleFlow.java:144)
        at org.springframework.batch.core.job.flow.FlowJob.doExecute(FlowJob.java:134)
        at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:306)
        at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:135)
        at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)
        at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:128)
        at org.springframework.batch.core.launch.support.SimpleJobOperator.start(SimpleJobOperator.java:314)
        at org.terasoluna.batch.async.db.JobRequestPollTask.executeJob(JobRequestPollTask.java:227)
        at org.terasoluna.batch.async.db.JobRequestPollTask.lambda$0(JobRequestPollTask.java:203)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
        at java.lang.Thread.run(Unknown Source)
jarの中のリソースにうまくアクセスできていない

@Service
public class InputFileImpl implements InputFile {

    @Inject
    ResourceLoader resourceLoader;

    @Override
    public InputStream inputLayoutXml(String layoutXml) throws IOException {

        System.out.println("one★★★★★★★★★★★★★★★★★★★★");
        System.out.println(layoutXml);
        System.out.println("two★★★★★★★★★★★★★★★★★★★★");
        System.out.println(resourceLoader.getResource("classpath:" + layoutXml).getURL().getFile());
        System.out.println("three★★★★★★★★★★★★★★★★★★★★");
        //System.out.println(resourceLoader.getResource("classpath:" + layoutXml).getFile());
        System.out.println("four★★★★★★★★★★★★★★★★★★★★");
        URL url = resourceLoader.getResource("classpath:" + layoutXml).getURL();
        System.out.println(url);
        System.out.println("five★★★★★★★★★★★★★★★★★★★★");
        
        InputStream fileStream = url.openStream();
        return fileStream;
    }
    
    /*
    @Override
    public InputStream inputLayoutXml(String layoutXml) throws IOException {

        System.out.println("one★★★★★★★★★★★★★★★★★★★★");
        System.out.println(layoutXml);
        System.out.println("two★★★★★★★★★★★★★★★★★★★★");
        System.out.println(resourceLoader.getResource("classpath:" + layoutXml).getURL().getFile());
        System.out.println("three★★★★★★★★★★★★★★★★★★★★");
        //System.out.println(resourceLoader.getResource("classpath:" + layoutXml).getFile());
        System.out.println("four★★★★★★★★★★★★★★★★★★★★");
        
        File xmlFile = new File(resourceLoader.getResource("classpath:"
                + layoutXml).getURL().getFile());
        InputStream fileStream = new FileInputStream(xmlFile);
        return fileStream;
    }
    */
    /*
     public InputStream inputLayoutXml(String layoutXml) throws IOException {
         
         Resource resource = resourceLoader.getResource("classpath:" + layoutXml); 
         File xmlFile = resource.getFile();
         InputStream fileStream = new FileInputStream(xmlFile);
         
         return fileStream;
     }
     */

}


urlから直接読み込めばうまくいく
●済み
-------------------------------------------------------

http://www.atmarkit.co.jp/bbs/phpBB/viewtopic.php?topic=40302&forum=12

xmlファイルをstringに変換するときにエラー
原因はネームスペースの定義をしてないから。
ではなく、子どもの節以降を読み込むように設定されていたから
getchild()ではなくgetparent()を指定する

1 26, 2018 5:17:04 午後 org.apache.catalina.startup.Catalina load
情報: Initialization processed in 1425 ms
1 26, 2018 5:17:29 午後 org.apache.catalina.startup.Catalina start
情報: Server startup in 25127 ms
ERROR:  '接頭辞'bs'のネームスペースが宣言されていません。'
javax.xml.transform.TransformerException: java.lang.RuntimeException: 接頭辞'bs'のネームスペースが宣言されていません。
	at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:746)
	at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:351)
	at sample04.controller.WSS_JAXWS_Sample4verXmlData.transform(WSS_JAXWS_Sample4verXmlData.java:238)
	at sample04.controller.WSS_JAXWS_Sample4verXmlData.convertToString(WSS_JAXWS_Sample4verXmlData.java:220)
	at sample04.controller.WSS_JAXWS_Sample4verXmlData.createlayout(WSS_JAXWS_Sample4verXmlData.java:201)
	at sample04.controller.WSS_JAXWS_Sample4verXmlData.generate(WSS_JAXWS_Sample4verXmlData.java:173)
	at sample04.controller.WSS_JAXWS_Sample4verXmlData.doGet(WSS_JAXWS_Sample4verXmlData.java:110)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:635)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:198)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:478)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)
	at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:650)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:803)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1459)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.lang.RuntimeException: 接頭辞'bs'のネームスペースが宣言されていません。
	at com.sun.org.apache.xml.internal.serializer.SerializerBase.getNamespaceURI(SerializerBase.java:915)
	at com.sun.org.apache.xml.internal.serializer.SerializerBase.addAttribute(SerializerBase.java:431)
	at com.sun.org.apache.xml.internal.serializer.ToUnknownStream.addAttribute(ToUnknownStream.java:316)
	at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:201)
	at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:94)
	at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transformIdentity(TransformerImpl.java:693)
	at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:737)
	... 30 more
---------
java.lang.RuntimeException: 接頭辞'bs'のネームスペースが宣言されていません。
	at com.sun.org.apache.xml.internal.serializer.SerializerBase.getNamespaceURI(SerializerBase.java:915)
	at com.sun.org.apache.xml.internal.serializer.SerializerBase.addAttribute(SerializerBase.java:431)
	at com.sun.org.apache.xml.internal.serializer.ToUnknownStream.addAttribute(ToUnknownStream.java:316)
	at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:201)
	at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:94)
	at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transformIdentity(TransformerImpl.java:693)
	at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:737)
	at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:351)
	at sample04.controller.WSS_JAXWS_Sample4verXmlData.transform(WSS_JAXWS_Sample4verXmlData.java:238)
	at sample04.controller.WSS_JAXWS_Sample4verXmlData.convertToString(WSS_JAXWS_Sample4verXmlData.java:220)
	at sample04.controller.WSS_JAXWS_Sample4verXmlData.createlayout(WSS_JAXWS_Sample4verXmlData.java:201)
	at sample04.controller.WSS_JAXWS_Sample4verXmlData.generate(WSS_JAXWS_Sample4verXmlData.java:173)
	at sample04.controller.WSS_JAXWS_Sample4verXmlData.doGet(WSS_JAXWS_Sample4verXmlData.java:110)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:635)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:198)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:478)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)
	at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:650)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:803)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1459)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
ERROR:  '接頭辞'bs'のネームスペースが宣言されていません。'
javax.xml.transform.TransformerException: java.lang.RuntimeException: 接頭辞'bs'のネームスペースが宣言されていません。
	at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:746)
	at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:351)
	at sample04.controller.WSS_JAXWS_Sample4verXmlData.transform(WSS_JAXWS_Sample4verXmlData.java:238)
	at sample04.controller.WSS_JAXWS_Sample4verXmlData.convertToString(WSS_JAXWS_Sample4verXmlData.java:220)
	at sample04.controller.WSS_JAXWS_Sample4verXmlData.createlayout(WSS_JAXWS_Sample4verXmlData.java:201)
	at sample04.controller.WSS_JAXWS_Sample4verXmlData.generate(WSS_JAXWS_Sample4verXmlData.java:173)
	at sample04.controller.WSS_JAXWS_Sample4verXmlData.doGet(WSS_JAXWS_Sample4verXmlData.java:110)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:635)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:198)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:478)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)
	at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:650)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:803)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1459)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.lang.RuntimeException: 接頭辞'bs'のネームスペースが宣言されていません。
	at com.sun.org.apache.xml.internal.serializer.SerializerBase.getNamespaceURI(SerializerBase.java:915)
	at com.sun.org.apache.xml.internal.serializer.SerializerBase.addAttribute(SerializerBase.java:431)
	at com.sun.org.apache.xml.internal.serializer.ToUnknownStream.addAttribute(ToUnknownStream.java:316)
	at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:201)
	at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:94)
	at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transformIdentity(TransformerImpl.java:693)
	at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:737)
	... 30 more
---------
java.lang.RuntimeException: 接頭辞'bs'のネームスペースが宣言されていません。
	at com.sun.org.apache.xml.internal.serializer.SerializerBase.getNamespaceURI(SerializerBase.java:915)
	at com.sun.org.apache.xml.internal.serializer.SerializerBase.addAttribute(SerializerBase.java:431)
	at com.sun.org.apache.xml.internal.serializer.ToUnknownStream.addAttribute(ToUnknownStream.java:316)
	at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:201)
	at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:94)
	at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transformIdentity(TransformerImpl.java:693)
	at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:737)
	at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:351)
	at sample04.controller.WSS_JAXWS_Sample4verXmlData.transform(WSS_JAXWS_Sample4verXmlData.java:238)
	at sample04.controller.WSS_JAXWS_Sample4verXmlData.convertToString(WSS_JAXWS_Sample4verXmlData.java:220)
	at sample04.controller.WSS_JAXWS_Sample4verXmlData.createlayout(WSS_JAXWS_Sample4verXmlData.java:201)
	at sample04.controller.WSS_JAXWS_Sample4verXmlData.generate(WSS_JAXWS_Sample4verXmlData.java:173)
	at sample04.controller.WSS_JAXWS_Sample4verXmlData.doGet(WSS_JAXWS_Sample4verXmlData.java:110)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:635)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:198)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:478)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)
	at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:650)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:803)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1459)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)


●済み
-------------------------------------------------------
FTPClientでIMAGE_FILE_TYPEの定数が使えない

状況
if (ftpCl.changeWorkingDirectory(imgLogoAdds)) {

    ftpCl.setFileType(FTP.IMAGE_FILE_TYPE);

    if (ftpCl.storeFile(newFileName, streamKinko)) {
        ftpCl.site("chmod 757 " + newFileName);
    } else {
        return false;
    }
}


エラー内容

原因
FTPClientには２つのバージョンが存在
https://commons.apache.org/proper/commons-net/download_net.cgi
Apache Commons Net 3.6 API
Commons Net 1.4.1 API

IMAGE_FILE_TYPEが存在するのはCommons Net 1.4.1 APIのバージョンの方のみであり、
Apache Commons Net 3.6 APIのライブラリを使っていたため

解決策
IMAGE_FILE_TYPE⇒BINARY_FILE_TYPEに変更する

●済み
-------------------------------------------------------
使用環境
java.lang.Error: Unresolved compilation problems: 
    log cannot be resolved
状況

エラー内容

[2018/02/06 16:34:58] [daemonTaskExecutor-2] [o.s.b.c.j.SimpleStepHandler] [INFO ] Executing step: [sample01Job.step01]
[2018/02/06 16:34:58] [daemonTaskExecutor-2] [o.s.b.c.s.AbstractStep] [ERROR] Encountered an error executing step sample01Job.step01 in job sample01Job
java.lang.Error: Unresolved compilation problems: 
    log cannot be resolved
    log cannot be resolved
    log cannot be resolved
    log cannot be resolved
    log cannot be resolved
    log cannot be resolved
at jp.co.nttdata.shinkin.batch.sample01.Sample01JobTasklet.execute(Sample01JobTasklet.java:30)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:498)


原因
https://qa.atmarkit.co.jp/q/5818
⇒文字コードの問題？
ワークスペース⇒テキスト・ファイル・エンコード
⇒MS932→UTF-8

https://stackoverflow.com/questions/1124788/java-unresolved-compilation-problem
⇒maven clean して再度実行？
https://stackoverflow.com/questions/48220822/java-log-cannot-be-resolved?rq=1
⇒ Lombokインストールできてない？
⇒lombok.log.fieldName = xxxを使用して、変数を別のものにログする名前を変更するlombok.configファイルがありますか

解決策
https://qa.atmarkit.co.jp/q/5818
⇒文字コードの問題？
ワークスペース⇒テキスト・ファイル・エンコード
⇒MS932→UTF-8

●済み
-------------------------------------------------------
使用環境

状況
Spring batch 起動時に発生


エラー内容
SLF4J: Actual binding is of type [ch.qos.logback.classic.util.ContextSelectorStaticBinder]
[2018/02/06 18:17:35] [main] [o.s.c.s.ClassPathXmlApplicationContext] [INFO ] Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@100a15d: startup date [Tue Feb 06 18:17:35 JST 2018]; root of context hierarchy
[2018/02/06 18:17:35] [main] [o.s.b.f.x.XmlBeanDefinitionReader] [INFO ] Loading XML bean definitions from class path resource [META-INF/jobs/sample03/sample03.xml]
[2018/02/06 18:17:35] [main] [o.s.b.f.x.XmlBeanDefinitionReader] [INFO ] Loading XML bean definitions from class path resource [META-INF/spring/job-base-context.xml]
[2018/02/06 18:17:35] [main] [o.s.b.f.x.XmlBeanDefinitionReader] [INFO ] Loading XML bean definitions from class path resource [META-INF/spring/launch-context.xml]
[2018/02/06 18:17:36] [main] [o.s.b.f.c.PropertyPlaceholderConfigurer] [INFO ] Loading properties file from class path resource [batch-application.properties]
[2018/02/06 18:17:36] [main] [o.s.b.f.c.PropertyPlaceholderConfigurer] [INFO ] Loading properties file from class path resource [META-INF/jobs/sample03/sample03.properties]
[2018/02/06 18:17:36] [main] [o.s.b.f.s.DefaultListableBeanFactory] [INFO ] Overriding bean definition for bean 'sample01JobTasklet' with a different definition: replacing [Generic bean: class [jp.co.nttdata.shinkin.batch.sample01.Sample01JobTasklet]; scope=step; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=false; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in file [C:\gitbucket\IB2020_group\TERA5x_batch\shinkin-batch\target\classes\jp\co\nttdata\shinkin\batch\sample01\Sample01JobTasklet.class]] with [Root bean: class [org.springframework.aop.scope.ScopedProxyFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in BeanDefinition defined in file [C:\gitbucket\IB2020_group\TERA5x_batch\shinkin-batch\target\classes\jp\co\nttdata\shinkin\batch\sample01\Sample01JobTasklet.class]]
[2018/02/06 18:17:36] [main] [o.s.b.f.s.DefaultListableBeanFactory] [INFO ] Overriding bean definition for bean 'sample02JobTasklet' with a different definition: replacing [Generic bean: class [jp.co.nttdata.shinkin.batch.sample02.Sample02JobTasklet]; scope=step; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=false; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in file [C:\gitbucket\IB2020_group\TERA5x_batch\shinkin-batch\target\classes\jp\co\nttdata\shinkin\batch\sample02\Sample02JobTasklet.class]] with [Root bean: class [org.springframework.aop.scope.ScopedProxyFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in BeanDefinition defined in file [C:\gitbucket\IB2020_group\TERA5x_batch\shinkin-batch\target\classes\jp\co\nttdata\shinkin\batch\sample02\Sample02JobTasklet.class]]
[2018/02/06 18:17:36] [main] [o.s.b.f.s.DefaultListableBeanFactory] [INFO ] Overriding bean definition for bean 'sample03JobTasklet' with a different definition: replacing [Generic bean: class [jp.co.nttdata.shinkin.batch.sample03.Sample03JobTasklet]; scope=step; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=false; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in file [C:\gitbucket\IB2020_group\TERA5x_batch\shinkin-batch\target\classes\jp\co\nttdata\shinkin\batch\sample03\Sample03JobTasklet.class]] with [Root bean: class [org.springframework.aop.scope.ScopedProxyFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in BeanDefinition defined in file [C:\gitbucket\IB2020_group\TERA5x_batch\shinkin-batch\target\classes\jp\co\nttdata\shinkin\batch\sample03\Sample03JobTasklet.class]]
[2018/02/06 18:17:36] [main] [o.s.b.f.s.DefaultListableBeanFactory] [INFO ] Overriding bean definition for bean 'sample04JobTasklet' with a different definition: replacing [Generic bean: class [jp.co.nttdata.shinkin.batch.sample04.Sample04JobTasklet]; scope=step; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=false; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in file [C:\gitbucket\IB2020_group\TERA5x_batch\shinkin-batch\target\classes\jp\co\nttdata\shinkin\batch\sample04\Sample04JobTasklet.class]] with [Root bean: class [org.springframework.aop.scope.ScopedProxyFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in BeanDefinition defined in file [C:\gitbucket\IB2020_group\TERA5x_batch\shinkin-batch\target\classes\jp\co\nttdata\shinkin\batch\sample04\Sample04JobTasklet.class]]
[2018/02/06 18:17:36] [main] [o.s.b.f.a.AutowiredAnnotationBeanPostProcessor] [INFO ] JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
[2018/02/06 18:17:36] [main] [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] [INFO ] Bean 'jobRegistry' of type [class org.springframework.batch.core.configuration.support.MapJobRegistry] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[2018/02/06 18:17:38] [main] [o.s.b.c.r.s.JobRepositoryFactoryBean] [INFO ] No database type set, using meta data indicating: DB2
[2018/02/06 18:17:39] [main] [o.s.b.c.l.s.SimpleJobLauncher] [INFO ] No TaskExecutor has been set, defaulting to synchronous executor.
[2018/02/06 18:17:39] [main] [o.s.j.d.i.ScriptUtils ] [INFO ] Executing SQL script from class path resource [ddl/schema-db2.sql]
[2018/02/06 18:17:39] [main] [o.s.j.d.i.ScriptUtils ] [INFO ] Executed SQL script from class path resource [ddl/schema-db2.sql] in 38 ms.
[2018/02/06 18:17:39] [main] [o.s.j.d.i.ScriptUtils ] [INFO ] Executing SQL script from class path resource [org/terasoluna/batch/async/db/schema-commit.sql]
[2018/02/06 18:17:39] [main] [o.s.j.d.i.ScriptUtils ] [INFO ] Executed SQL script from class path resource [org/terasoluna/batch/async/db/schema-commit.sql] in 5 ms.
[2018/02/06 18:17:39] [main] [o.h.v.i.util.Version  ] [INFO ] HV000001: Hibernate Validator 5.2.4.Final
[2018/02/06 18:17:40] [main] [o.s.c.s.ClassPathXmlApplicationContext] [WARN ] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'jobSqlSessionFactory' defined in class path resource [META-INF/spring/launch-context.xml]: Invocation of init method failed; nested exception is org.springframework.core.NestedIOException: Failed to parse config resource: class path resource [META-INF/mybatis/mybatis-config.xml]; nested exception is org.apache.ibatis.builder.BuilderException: Error parsing SQL Mapper Configuration. Cause: org.apache.ibatis.type.TypeException: The alias 'UserDTO' is already mapped to the value 'jp.co.nttdata.shinkin.repository.sample02.UserDTO'.
[2018/02/06 18:17:40] [main] [o.s.b.c.l.s.CommandLineJobRunner] [ERROR] Job Terminated in error: Error creating bean with name 'jobSqlSessionFactory' defined in class path resource [META-INF/spring/launch-context.xml]: Invocation of init method failed; nested exception is org.springframework.core.NestedIOException: Failed to parse config resource: class path resource [META-INF/mybatis/mybatis-config.xml]; nested exception is org.apache.ibatis.builder.BuilderException: Error parsing SQL Mapper Configuration. Cause: org.apache.ibatis.type.TypeException: The alias 'UserDTO' is already mapped to the value 'jp.co.nttdata.shinkin.repository.sample02.UserDTO'.
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'jobSqlSessionFactory' defined in class path resource [META-INF/spring/launch-context.xml]: Invocation of init method failed; nested exception is org.springframework.core.NestedIOException: Failed to parse config resource: class path resource [META-INF/mybatis/mybatis-config.xml]; nested exception is org.apache.ibatis.builder.BuilderException: Error parsing SQL Mapper Configuration. Cause: org.apache.ibatis.type.TypeException: The alias 'UserDTO' is already mapped to the value 'jp.co.nttdata.shinkin.repository.sample02.UserDTO'.
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1589)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:554)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:483)
	at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:740)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:866)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:542)
	at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
	at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:83)
	at org.springframework.batch.core.launch.support.CommandLineJobRunner.start(CommandLineJobRunner.java:290)
	at org.springframework.batch.core.launch.support.CommandLineJobRunner.main(CommandLineJobRunner.java:592)
Caused by: org.springframework.core.NestedIOException: Failed to parse config resource: class path resource [META-INF/mybatis/mybatis-config.xml]; nested exception is org.apache.ibatis.builder.BuilderException: Error parsing SQL Mapper Configuration. Cause: org.apache.ibatis.type.TypeException: The alias 'UserDTO' is already mapped to the value 'jp.co.nttdata.shinkin.repository.sample02.UserDTO'.
	at org.mybatis.spring.SqlSessionFactoryBean.buildSqlSessionFactory(SqlSessionFactoryBean.java:500)
	at org.mybatis.spring.SqlSessionFactoryBean.afterPropertiesSet(SqlSessionFactoryBean.java:380)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1648)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1585)
	... 13 common frames omitted
Caused by: org.apache.ibatis.builder.BuilderException: Error parsing SQL Mapper Configuration. Cause: org.apache.ibatis.type.TypeException: The alias 'UserDTO' is already mapped to the value 'jp.co.nttdata.shinkin.repository.sample02.UserDTO'.
	at org.apache.ibatis.builder.xml.XMLConfigBuilder.parseConfiguration(XMLConfigBuilder.java:120)
	at org.apache.ibatis.builder.xml.XMLConfigBuilder.parse(XMLConfigBuilder.java:98)
	at org.mybatis.spring.SqlSessionFactoryBean.buildSqlSessionFactory(SqlSessionFactoryBean.java:494)
	... 16 common frames omitted
Caused by: org.apache.ibatis.type.TypeException: The alias 'UserDTO' is already mapped to the value 'jp.co.nttdata.shinkin.repository.sample02.UserDTO'.
	at org.apache.ibatis.type.TypeAliasRegistry.registerAlias(TypeAliasRegistry.java:157)
	at org.apache.ibatis.type.TypeAliasRegistry.registerAlias(TypeAliasRegistry.java:147)
	at org.apache.ibatis.type.TypeAliasRegistry.registerAliases(TypeAliasRegistry.java:136)
	at org.apache.ibatis.type.TypeAliasRegistry.registerAliases(TypeAliasRegistry.java:125)
	at org.apache.ibatis.builder.xml.XMLConfigBuilder.typeAliasesElement(XMLConfigBuilder.java:158)
	at org.apache.ibatis.builder.xml.XMLConfigBuilder.parseConfiguration(XMLConfigBuilder.java:108)
	... 18 common frames omitted


原因

同じ名前のクラスファイルが存在し、どっちも読み込もうとして競合した。


解決策
クラスファイルの名前を変更する


-------------------------------------------------------
使用環境

状況

spring batch 起動でエラー

エラー内容
SLF4J: Actual binding is of type [ch.qos.logback.classic.util.ContextSelectorStaticBinder]
[2018/02/06 18:33:40] [main] [o.s.c.s.ClassPathXmlApplicationContext] [INFO ] Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@100a15d: startup date [Tue Feb 06 18:33:40 JST 2018]; root of context hierarchy
[2018/02/06 18:33:40] [main] [o.s.b.f.x.XmlBeanDefinitionReader] [INFO ] Loading XML bean definitions from class path resource [META-INF/jobs/sample03/sample03.xml]
[2018/02/06 18:33:40] [main] [o.s.b.f.x.XmlBeanDefinitionReader] [INFO ] Loading XML bean definitions from class path resource [META-INF/spring/job-base-context.xml]
[2018/02/06 18:33:40] [main] [o.s.b.f.x.XmlBeanDefinitionReader] [INFO ] Loading XML bean definitions from class path resource [META-INF/spring/launch-context.xml]
[2018/02/06 18:33:41] [main] [o.s.b.f.c.PropertyPlaceholderConfigurer] [INFO ] Loading properties file from class path resource [batch-application.properties]
[2018/02/06 18:33:41] [main] [o.s.b.f.c.PropertyPlaceholderConfigurer] [INFO ] Loading properties file from class path resource [META-INF/jobs/sample03/sample03.properties]
[2018/02/06 18:33:41] [main] [o.s.b.f.s.DefaultListableBeanFactory] [INFO ] Overriding bean definition for bean 'sample01JobTasklet' with a different definition: replacing [Generic bean: class [jp.co.nttdata.shinkin.batch.sample01.Sample01JobTasklet]; scope=step; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=false; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in file [C:\gitbucket\IB2020_group\TERA5x_batch\shinkin-batch\target\classes\jp\co\nttdata\shinkin\batch\sample01\Sample01JobTasklet.class]] with [Root bean: class [org.springframework.aop.scope.ScopedProxyFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in BeanDefinition defined in file [C:\gitbucket\IB2020_group\TERA5x_batch\shinkin-batch\target\classes\jp\co\nttdata\shinkin\batch\sample01\Sample01JobTasklet.class]]
[2018/02/06 18:33:41] [main] [o.s.b.f.s.DefaultListableBeanFactory] [INFO ] Overriding bean definition for bean 'sample02JobTasklet' with a different definition: replacing [Generic bean: class [jp.co.nttdata.shinkin.batch.sample02.Sample02JobTasklet]; scope=step; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=false; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in file [C:\gitbucket\IB2020_group\TERA5x_batch\shinkin-batch\target\classes\jp\co\nttdata\shinkin\batch\sample02\Sample02JobTasklet.class]] with [Root bean: class [org.springframework.aop.scope.ScopedProxyFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in BeanDefinition defined in file [C:\gitbucket\IB2020_group\TERA5x_batch\shinkin-batch\target\classes\jp\co\nttdata\shinkin\batch\sample02\Sample02JobTasklet.class]]
[2018/02/06 18:33:41] [main] [o.s.b.f.s.DefaultListableBeanFactory] [INFO ] Overriding bean definition for bean 'sample03JobTasklet' with a different definition: replacing [Generic bean: class [jp.co.nttdata.shinkin.batch.sample03.Sample03JobTasklet]; scope=step; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=false; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in file [C:\gitbucket\IB2020_group\TERA5x_batch\shinkin-batch\target\classes\jp\co\nttdata\shinkin\batch\sample03\Sample03JobTasklet.class]] with [Root bean: class [org.springframework.aop.scope.ScopedProxyFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in BeanDefinition defined in file [C:\gitbucket\IB2020_group\TERA5x_batch\shinkin-batch\target\classes\jp\co\nttdata\shinkin\batch\sample03\Sample03JobTasklet.class]]
[2018/02/06 18:33:41] [main] [o.s.b.f.s.DefaultListableBeanFactory] [INFO ] Overriding bean definition for bean 'sample04JobTasklet' with a different definition: replacing [Generic bean: class [jp.co.nttdata.shinkin.batch.sample04.Sample04JobTasklet]; scope=step; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=false; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in file [C:\gitbucket\IB2020_group\TERA5x_batch\shinkin-batch\target\classes\jp\co\nttdata\shinkin\batch\sample04\Sample04JobTasklet.class]] with [Root bean: class [org.springframework.aop.scope.ScopedProxyFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in BeanDefinition defined in file [C:\gitbucket\IB2020_group\TERA5x_batch\shinkin-batch\target\classes\jp\co\nttdata\shinkin\batch\sample04\Sample04JobTasklet.class]]
[2018/02/06 18:33:41] [main] [o.s.b.f.a.AutowiredAnnotationBeanPostProcessor] [INFO ] JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
[2018/02/06 18:33:41] [main] [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] [INFO ] Bean 'jobRegistry' of type [class org.springframework.batch.core.configuration.support.MapJobRegistry] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
[2018/02/06 18:33:42] [main] [o.s.b.c.r.s.JobRepositoryFactoryBean] [INFO ] No database type set, using meta data indicating: DB2
[2018/02/06 18:33:42] [main] [o.s.b.c.l.s.SimpleJobLauncher] [INFO ] No TaskExecutor has been set, defaulting to synchronous executor.
[2018/02/06 18:33:43] [main] [o.s.j.d.i.ScriptUtils ] [INFO ] Executing SQL script from class path resource [ddl/schema-db2.sql]
[2018/02/06 18:33:43] [main] [o.s.j.d.i.ScriptUtils ] [INFO ] Executed SQL script from class path resource [ddl/schema-db2.sql] in 38 ms.
[2018/02/06 18:33:43] [main] [o.s.j.d.i.ScriptUtils ] [INFO ] Executing SQL script from class path resource [org/terasoluna/batch/async/db/schema-commit.sql]
[2018/02/06 18:33:43] [main] [o.s.j.d.i.ScriptUtils ] [INFO ] Executed SQL script from class path resource [org/terasoluna/batch/async/db/schema-commit.sql] in 3 ms.
[2018/02/06 18:33:43] [main] [o.h.v.i.util.Version  ] [INFO ] HV000001: Hibernate Validator 5.2.4.Final
[2018/02/06 18:33:43] [main] [o.s.c.s.ClassPathXmlApplicationContext] [WARN ] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'sample02JobService': Unsatisfied dependency expressed through field 'repos'; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'jp.co.nttdata.shinkin.repository.sample02.Sample02Repository' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@javax.inject.Inject()}
[2018/02/06 18:33:43] [main] [o.s.b.c.l.s.CommandLineJobRunner] [ERROR] Job Terminated in error: Error creating bean with name 'sample02JobService': Unsatisfied dependency expressed through field 'repos'; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'jp.co.nttdata.shinkin.repository.sample02.Sample02Repository' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@javax.inject.Inject()}
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'sample02JobService': Unsatisfied dependency expressed through field 'repos'; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'jp.co.nttdata.shinkin.repository.sample02.Sample02Repository' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@javax.inject.Inject()}
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:588)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:88)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1225)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:552)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:483)
	at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:759)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:866)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:542)
	at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
	at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:83)
	at org.springframework.batch.core.launch.support.CommandLineJobRunner.start(CommandLineJobRunner.java:290)
	at org.springframework.batch.core.launch.support.CommandLineJobRunner.main(CommandLineJobRunner.java:592)
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'jp.co.nttdata.shinkin.repository.sample02.Sample02Repository' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@javax.inject.Inject()}
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1474)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1102)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1064)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:585)
	... 16 common frames omitted
	
原因

component-scanを行う位置がずれていた
<context:component-scan
        base-package="jp.co.nttdata.shinkin.batch.sample03,
  						jp.co.nttdata.shinkin.service.sample03,
 						jp.co.nttdata.shinkin.repository.sample03" />

解決策

-------------------------------------------------------
使用環境
STSで実行、デバッグしたのにコンソールに表示されない。
状況

エラー内容

原因
コンソールに表示する設定ができていなかった。

解決策
「実行」⇒「実行の構成」⇒実行していた設定→「共通」
標準入出力⇒コンソールに割り当て（A）（入力に必要）にチェックを入れる
●済み
-------------------------------------------------------
使用環境
STSで実行、デバッグしても起動しない。
状況

エラー内容

原因
実行の構成の設定がうまくできていなかった

解決策
「実行の構成」⇒実行していた設定→「クラスパス」
デフォルト・エントリーの復元をクリック
「ブートストラップ・エントリー」「ユーザー・エントリー」にライブラリ・プロジェクト系が設定されたことを確認
再度実行する。
●済み
-------------------------------------------------------
使用環境
mybatisでstring型を動的パラメータ（${}）で渡そうとしたらエラー

状況
String tabelName = "hoge";
HogeDTO hogeDto = repository.searchHogeTable(schema);


<select id="getKinkoInfo" resultMap="getKinkoInfo" parameterType="string">
        <![CDATA[
            SELECT
                設置金融機関コード,
                設置店舗コード
            FROM
                ${schema}.ＣＴ金庫情報
            WHERE
                主キー = 1
        ]]>
</select>

<select id="searchHogeTable" resultMap="HogeDTO" parameterType="string">
SELECT
    hoge,
    poge,
FROM
    ${tableName}_table
WHERE
    poge = '1'
</select>

public HogeDTO searchHogeTable(String pogeNumber);
public interface HogeRepository {
    HogeDTO searchHogeTable(String pogeNumber);
}



エラー内容
[2018/02/09 14:20:39] [main] [o.s.b.c.s.AbstractStep] [ERROR] Encountered an error executing step BKP00075.step01 in job BKP00075
org.mybatis.spring.MyBatisSystemException: nested exception is org.apache.ibatis.reflection.ReflectionException: There is no getter for property named 'schema' in 'class java.lang.String'
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:77)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:446)
	at com.sun.proxy.$Proxy17.selectOne(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.selectOne(SqlSessionTemplate.java:166)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:82)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:59)
	at com.sun.proxy.$Proxy19.getKinkoInfo(Unknown Source)
	at jp.co.nttdata.shinkin.service.BKP00075.BKP00075ServiceImpl.createPdf(BKP00075ServiceImpl.java:43)
	at jp.co.nttdata.shinkin.batch.BKP00075.BKP00075Tasklet.execute(BKP00075Tasklet.java:66)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:333)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:133)
	at org.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:121)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:213)
	at com.sun.proxy.$Proxy9.execute(Unknown Source)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:406)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:330)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:133)
	at org.springframework.batch.core.step.tasklet.TaskletStep$2.doInChunkContext(TaskletStep.java:271)
	at org.springframework.batch.core.scope.context.StepContextRepeatCallback.doInIteration(StepContextRepeatCallback.java:81)
	at org.springframework.batch.repeat.support.RepeatTemplate.getNextResult(RepeatTemplate.java:374)
	at org.springframework.batch.repeat.support.RepeatTemplate.executeInternal(RepeatTemplate.java:215)
	at org.springframework.batch.repeat.support.RepeatTemplate.iterate(RepeatTemplate.java:144)
	at org.springframework.batch.core.step.tasklet.TaskletStep.doExecute(TaskletStep.java:257)
	at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:200)
	at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:148)
	at org.springframework.batch.core.job.flow.JobFlowExecutor.executeStep(JobFlowExecutor.java:64)
	at org.springframework.batch.core.job.flow.support.state.StepState.handle(StepState.java:67)
	at org.springframework.batch.core.job.flow.support.SimpleFlow.resume(SimpleFlow.java:169)
	at org.springframework.batch.core.job.flow.support.SimpleFlow.start(SimpleFlow.java:144)
	at org.springframework.batch.core.job.flow.FlowJob.doExecute(FlowJob.java:134)
	at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:306)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:135)
	at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:128)
	at org.springframework.batch.core.launch.support.CommandLineJobRunner.start(CommandLineJobRunner.java:362)
	at org.springframework.batch.core.launch.support.CommandLineJobRunner.main(CommandLineJobRunner.java:592)
Caused by: org.apache.ibatis.reflection.ReflectionException: There is no getter for property named 'schema' in 'class java.lang.String'
	at org.apache.ibatis.reflection.Reflector.getGetInvoker(Reflector.java:422)
	at org.apache.ibatis.reflection.MetaClass.getGetInvoker(MetaClass.java:164)
	at org.apache.ibatis.reflection.wrapper.BeanWrapper.getBeanProperty(BeanWrapper.java:162)
	at org.apache.ibatis.reflection.wrapper.BeanWrapper.get(BeanWrapper.java:49)
	at org.apache.ibatis.reflection.MetaObject.getValue(MetaObject.java:122)
	at org.apache.ibatis.scripting.xmltags.DynamicContext$ContextMap.get(DynamicContext.java:94)
	at org.apache.ibatis.scripting.xmltags.DynamicContext$ContextAccessor.getProperty(DynamicContext.java:108)
	at org.apache.ibatis.ognl.OgnlRuntime.getProperty(OgnlRuntime.java:2666)
	at org.apache.ibatis.ognl.ASTProperty.getValueBody(ASTProperty.java:114)
	at org.apache.ibatis.ognl.SimpleNode.evaluateGetValueBody(SimpleNode.java:212)
	at org.apache.ibatis.ognl.SimpleNode.getValue(SimpleNode.java:258)
	at org.apache.ibatis.ognl.Ognl.getValue(Ognl.java:467)
	at org.apache.ibatis.ognl.Ognl.getValue(Ognl.java:431)
	at org.apache.ibatis.scripting.xmltags.OgnlCache.getValue(OgnlCache.java:44)
	at org.apache.ibatis.scripting.xmltags.TextSqlNode$BindingTokenParser.handleToken(TextSqlNode.java:77)
	at org.apache.ibatis.parsing.GenericTokenParser.parse(GenericTokenParser.java:78)
	at org.apache.ibatis.scripting.xmltags.TextSqlNode.apply(TextSqlNode.java:51)
	at org.apache.ibatis.scripting.xmltags.MixedSqlNode.apply(MixedSqlNode.java:33)
	at org.apache.ibatis.scripting.xmltags.DynamicSqlSource.getBoundSql(DynamicSqlSource.java:41)
	at org.apache.ibatis.mapping.MappedStatement.getBoundSql(MappedStatement.java:292)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:81)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:148)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:141)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectOne(DefaultSqlSession.java:77)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:433)
	... 41 common frames omitted
[2018/02/09 14:20:39] [main] [o.s.b.c.l.s.SimpleJobLauncher] [INFO ] Job: [FlowJob: [name=BKP00075]] completed with the following parameters: [{schema=２７００, chohyoId=00075, jsr_batch_run_id=49}] and the following status: [FAILED]
[2018/02/09 14:20:39] [main] [o.s.c.s.ClassPathXmlApplicationContext] [INFO ] Closing org.springframework.context.support.ClassPathXmlApplicationContext@13f5a29: startup date [Fri Feb 09 14:20:34 JST 2018]; root of context hierarchy

原因
https://teratail.com/questions/100612
https://stackoverflow.com/questions/38948298/there-is-no-getter-for-property-named-tablename-in-class-java-lang-string
String型は${}に入れるパラメータとしては使えないらしい。
使う場合はMap型でマッピングする必要がある？

解決策

Map map = new HashMap();
map.put("schema", schema);
CTkinkojohoDTO KinkoInfo = new CTkinkojohoDTO();
KinkoInfo = repository.getKinkoInfo(map);

public CTkinkojohoDTO getKinkoInfo(Map map);

<select id="getKinkoInfo" resultMap="getKinkoInfo" parameterType="map">
        <![CDATA[
            SELECT
                設置金融機関コード,
                設置店舗コード
            FROM
                ${schema}.ＣＴ金庫情報
            WHERE
                主キー = 1
        ]]>
</select>
●済み
-------------------------------------------------------


Eclipse上でgradleプロジェクトファイルをインポートしようとしたらエラー


内容




C:\hoge>gradlew --scan build
Downloading https://services.gradle.org/distributions/gradle-3.5-all.zip

Exception in thread "main" java.io.IOException: Unable to tunnel through proxy. Proxy returns "HTTP/1.1 407 407"
        at sun.net.www.protocol.http.HttpURLConnection.doTunneling(HttpURLConnection.java:2124)
        at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:183)
        at sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1546)
        at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1474)
        at sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:254)
        at org.gradle.wrapper.Download.downloadInternal(Download.java:60)
        at org.gradle.wrapper.Download.download(Download.java:45)
        at org.gradle.wrapper.Install$1.call(Install.java:62)
        at org.gradle.wrapper.Install$1.call(Install.java:48)
        at org.gradle.wrapper.ExclusiveFileAccessManager.access(ExclusiveFileAccessManager.java:69)
        at org.gradle.wrapper.Install.createDist(Install.java:48)
        at org.gradle.wrapper.WrapperExecutor.execute(WrapperExecutor.java:107)
        at org.gradle.wrapper.GradleWrapperMain.main(GradleWrapperMain.java:61)

C:\gitbucket\IB2020_group\spring-batch-shinkinIB>


原因
https://www.nyusatsu.e-hyogo.jp/hyogo/files/https_tunneling.pdf
Java 8 Update 111 (8u111)から、HTTPSトンネリングのBasic認証の無効化がされておりそれが原因でした。

解決策
http://crmprogrammer38.hatenablog.com/entry/2017/05/15/103015
STS.ini
eclipse.iniに次のシステムプロパティを追加
「-Djdk.http.auth.tunneling.disabledSchemes=」

https://qiita.com/koooge/items/294e6a1000d99d92ae72

プロパティファイルに追加
~/.gradle/gradle.properties

systemProp.http.proxyHost=www.somehost.org
systemProp.http.proxyPort=8080
systemProp.http.proxyUser=userid
systemProp.http.proxyPassword=password
systemProp.http.nonProxyHosts=*.nonproxyrepos.com|localhost

systemProp.https.proxyHost=www.somehost.org
systemProp.https.proxyPort=8080
systemProp.https.proxyUser=userid
systemProp.https.proxyPassword=password
systemProp.https.nonProxyHosts=*.nonproxyrepos.com|localhost

systemProp.jdk.http.auth.tunneling.disabledSchemes=""
●済み
-------------------------------------------------------

Eclipse上でgradleプロジェクトファイルをインポートしようとしたらエラー

内容


C:\hoge>gradlew --scan build
:buildSrc:compileJava NO-SOURCE
:buildSrc:compileGroovy UP-TO-DATE
:buildSrc:processResources UP-TO-DATE
:buildSrc:classes UP-TO-DATE
:buildSrc:jar UP-TO-DATE
:buildSrc:assemble UP-TO-DATE
:buildSrc:compileTestJava NO-SOURCE
:buildSrc:compileTestGroovy NO-SOURCE
:buildSrc:processTestResources NO-SOURCE
:buildSrc:testClasses UP-TO-DATE
:buildSrc:test NO-SOURCE
:buildSrc:check UP-TO-DATE
:buildSrc:build UP-TO-DATE

FAILURE: Build failed with an exception.

* What went wrong:
_BuildScript_
> _BuildScript_

* Try:
Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.

BUILD FAILED

Total time: 3.191 secs

C:\gitbucket\IB2020_group\spring-batch-shinkinIB>


原因

https://stackoverflow.com/questions/47157080/java-lang-classnotfoundexception-buildscript

1
down vote
I think you have run into Groovy-Eclipse issue #370 (https://github.com/groovy/groovy-eclipse/issues/370). If you switch Groovy compiler level to 2.4 or below, this should not occur.

Window > Preferences > Groovy > Compiler > Groovy Compiler settings section

Groovyのコンパイラ・レベルを2.4以下に切り替えると、これは起こりません

https://discuss.gradle.org/t/seemingly-trivial-additions-to-build-gradle-cause-buildscript-error/24386/5



解決策
groovyのコンパイラレベルを下げる
のと、gradle用のものとは別にeclipse用のgroovyプラグインを入れる
●済み
-------------------------------------------------------------
Jschライブラリを使ったssh転送処理でエラー
使用環境
クライアント　win7
サーバ　ubuntu
STSから実行

状況
実行してエラー発生

エラー内容

com.jcraft.jsch.JSchException: failed to send channel request
	at com.jcraft.jsch.Request.write(Request.java:65)
	at com.jcraft.jsch.RequestSftp.request(RequestSftp.java:47)
	at com.jcraft.jsch.ChannelSftp.start(ChannelSftp.java:237)
	at com.jcraft.jsch.Channel.connect(Channel.java:152)
	at com.jcraft.jsch.Channel.connect(Channel.java:145)
	at jp.co.nttdata.shinkin.sftp.SFTP_transfer.SftpSample.connectChannelSftp(SftpSample.java:151)
	at jp.co.nttdata.shinkin.sftp.SFTP_transfer.SftpSample.putFile(SftpSample.java:46)
	at jp.co.nttdata.shinkin.sftp.SFTP_transfer.App.main(App.java:23)


原因
Javaの記述ではなく、サーバ側の設定に問題がある場合が多い。


解決策
https://stackoverflow.com/questions/14769164/jsch-error-failed-to-send-channel-request

サーバ(ubuntu)上のsshd_configを編集した

>sudo vi /etc/ssh/sshd_config

「Subsystem sftp internal-sftp」
を末尾に追記

>sudo /etc/init.d/ssh restart

再度実行で正常に処理された


●済み




-------------------------------------------------------------

com.jcraft.jsch.JSchException: HostKey has been changed: [10.9.52.127]:2222
	at com.jcraft.jsch.Session.checkHost(Session.java:775)
	at com.jcraft.jsch.Session.connect(Session.java:345)
	at com.jcraft.jsch.Session.connect(Session.java:183)
	at jp.co.nttdata.shinkin.sftp.SFTP_transfer.SftpSample.connectSession(SftpSample.java:128)
	at jp.co.nttdata.shinkin.sftp.SFTP_transfer.SftpSample.putFile(SftpSample.java:44)
	at jp.co.nttdata.shinkin.sftp.SFTP_transfer.App.main(App.java:23)




-------------------------------------------------------------


使用環境
springbatchで複数ステップによる実行をさせようとしたときにエラー

状況
org.springframework.beans.factory.parsing.BeanDefinitionParsingException

エラー内容
[2018/04/18 14:01:55] [main] [o.s.b.c.l.s.CommandLineJobRunner] [ERROR] Job Terminated in error: Configuration problem: The element [BKP00040.step02] is unreachable
Offending resource: class path resource [META-INF/jobs/pdf/gyomuSyuryo/BKP00040/BKP00040.xml]
org.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: The element [BKP00040.step02] is unreachable
Offending resource: class path resource [META-INF/jobs/pdf/gyomuSyuryo/BKP00040/BKP00040.xml]
	at org.springframework.beans.factory.parsing.FailFastProblemReporter.error(FailFastProblemReporter.java:70)
	at org.springframework.beans.factory.parsing.ReaderContext.error(ReaderContext.java:85)
	at org.springframework.beans.factory.parsing.ReaderContext.error(ReaderContext.java:72)
	at org.springframework.batch.core.configuration.xml.AbstractFlowParser.doParse(AbstractFlowParser.java:169)
	at org.springframework.batch.core.configuration.xml.InlineFlowParser.doParse(InlineFlowParser.java:61)
	at org.springframework.beans.factory.xml.AbstractSingleBeanDefinitionParser.parseInternal(AbstractSingleBeanDefinitionParser.java:85)
	at org.springframework.beans.factory.xml.AbstractBeanDefinitionParser.parse(AbstractBeanDefinitionParser.java:61)
	at org.springframework.batch.core.configuration.xml.JobParser.doParse(JobParser.java:121)
	at org.springframework.beans.factory.xml.AbstractSingleBeanDefinitionParser.parseInternal(AbstractSingleBeanDefinitionParser.java:85)
	at org.springframework.beans.factory.xml.AbstractBeanDefinitionParser.parse(AbstractBeanDefinitionParser.java:61)
	at org.springframework.beans.factory.xml.NamespaceHandlerSupport.parse(NamespaceHandlerSupport.java:74)
	at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1411)
	at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1401)
	at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:172)
	at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.doRegisterBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:142)
	at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:94)
	at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:508)
	at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:392)
	at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:336)
	at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:304)
	at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:181)
	at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:217)
	at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:188)
	at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:252)
	at org.springframework.context.support.AbstractXmlApplicationContext.loadBeanDefinitions(AbstractXmlApplicationContext.java:127)
	at org.springframework.context.support.AbstractXmlApplicationContext.loadBeanDefinitions(AbstractXmlApplicationContext.java:93)
	at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:129)
	at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:613)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:514)
	at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
	at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:83)
	at org.springframework.batch.core.launch.support.CommandLineJobRunner.start(CommandLineJobRunner.java:290)
	at org.springframework.batch.core.launch.support.CommandLineJobRunner.main(CommandLineJobRunner.java:592)

原因
xmlファイルの記述ミス
https://stackoverflow.com/questions/20289814/beandefinitionparsingexception-configuration-the-element-step2-is-unreachabl
解決策
batch:stepタグにnext="step2"属性を指定する

-------------------------------------------------------








使用環境

状況

エラー内容

npm ERR! Windows_NT 6.1.7601
npm ERR! argv "C:\\Nodist\\v\\7.2.1\\node.exe" "C:\\Nodist\\npmv\\4.0.5\\bin\\npm-cli.js" "install" "hubot" "hubot-scr
npm ERR! node v7.2.1
npm ERR! npm  v4.0.5
npm ERR! code ETIMEDOUT
npm ERR! errno ETIMEDOUT
npm ERR! syscall connect

npm ERR! network connect ETIMEDOUT 151.101.72.162:443
npm ERR! network This is most likely not a problem with npm itself
npm ERR! network and is related to network connectivity.
npm ERR! network In most cases you are behind a proxy or have bad network settings.
npm ERR! network
npm ERR! network If you are behind a proxy, please make sure that the
npm ERR! network 'proxy' config is set properly.  See: 'npm help config'

npm ERR! Please include the following file with any support request:
npm ERR!     C:\hubot\mattermost-hubot\npm-debug.log

C:\hubot\mattermost-hubot>
C:\hubot\mattermost-hubot>npm config set registry http://registry.npmjs.org/

原因
プロキシ設定



解決策
npm config list
https://qiita.com/flat-8-kiki/items/f71f5375a053fab01033





https://qiita.com/murachi1208/items/71e34add1a5371eff1aa


npm -g config set proxy http://U602896:7ujm6yhn@127.0.0.1:8080
npm -g config set https-proxy http://U602896:7ujm6yhn@127.0.0.1:8080
npm -g config set registry http://registry.npmjs.org/

http://10.17.25.107:8065/hooks/bnb8fwdq4bywxq6e7ok7da33hc


export PORT=18080
export MATTERMOST_ENDPOINT=/hubot/incoming
export MATTERMOST_TOKEN=jxh3dhx8yfn17ygo4pjrgqgrxy
export MATTERMOST_INCOME_URL=http://192.168.11.224/hooks/bg54t5czcpyzuxjt9ssaozw9we
export MATTERMOST_HUBOT_USERNAME=matter-bot
windowsの場合は環境変数に入れる。


---------------------------------------------------------------------------------------------

使用環境

状況


BATCH_STEP_EXECUTIONへの結果格納時にエラー

エラー内容
[2018/06/11 15:50:04] [main] [o.s.b.f.x.XmlBeanDefinitionReader] [INFO ] Loading XML bean definitions from class path resource [org/springframework/jdbc/support/sql-error-codes.xml]
[2018/06/11 15:50:04] [main] [o.s.j.s.SQLErrorCodesFactory] [INFO ] SQLErrorCodes loaded: [DB2, Derby, H2, HSQL, Informix, MS-SQL, MySQL, Oracle, PostgreSQL, Sybase, Hana]
[2018/06/11 15:50:04] [main] [o.s.b.c.s.AbstractStep] [ERROR] Encountered an error saving batch meta data for step BKP10170.step01 in job BKP10170. This job is now in an unknown state and should not be restarted.
org.springframework.dao.DataIntegrityViolationException: PreparedStatementCallback; SQL [UPDATE BATCH_STEP_EXECUTION set START_TIME = ?, END_TIME = ?, STATUS = ?, COMMIT_COUNT = ?, READ_COUNT = ?, FILTER_COUNT = ?, WRITE_COUNT = ?, EXIT_CODE = ?, EXIT_MESSAGE = ?, VERSION = ?, READ_SKIP_COUNT = ?, PROCESS_SKIP_COUNT = ?, WRITE_SKIP_COUNT = ?, ROLLBACK_COUNT = ?, LAST_UPDATED = ? where STEP_EXECUTION_ID = ? and VERSION = ?]; DB2 SQL Error: SQLCODE=-302, SQLSTATE=22001, SQLERRMC=null, DRIVER=4.11.77; nested exception is com.ibm.db2.jcc.am.SqlDataException: DB2 SQL Error: SQLCODE=-302, SQLSTATE=22001, SQLERRMC=null, DRIVER=4.11.77
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:82)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:73)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:81)
	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:649)
	at org.springframework.jdbc.core.JdbcTemplate.update(JdbcTemplate.java:870)
	at org.springframework.jdbc.core.JdbcTemplate.update(JdbcTemplate.java:931)
	at org.springframework.jdbc.core.JdbcTemplate.update(JdbcTemplate.java:936)
	at org.springframework.batch.core.repository.dao.JdbcStepExecutionDao.updateStepExecution(JdbcStepExecutionDao.java:244)
	at org.springframework.batch.core.repository.support.SimpleJobRepository.update(SimpleJobRepository.java:191)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:333)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:213)
	at com.sun.proxy.$Proxy11.update(Unknown Source)
	at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:260)
	at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:148)
	at org.springframework.batch.core.job.flow.JobFlowExecutor.executeStep(JobFlowExecutor.java:64)
	at org.springframework.batch.core.job.flow.support.state.StepState.handle(StepState.java:67)
	at org.springframework.batch.core.job.flow.support.SimpleFlow.resume(SimpleFlow.java:169)
	at org.springframework.batch.core.job.flow.support.SimpleFlow.start(SimpleFlow.java:144)
	at org.springframework.batch.core.job.flow.FlowJob.doExecute(FlowJob.java:134)
	at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:306)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:135)
	at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:128)
	at org.springframework.batch.core.launch.support.CommandLineJobRunner.start(CommandLineJobRunner.java:362)
	at org.springframework.batch.core.launch.support.CommandLineJobRunner.main(CommandLineJobRunner.java:592)
Caused by: com.ibm.db2.jcc.am.SqlDataException: DB2 SQL Error: SQLCODE=-302, SQLSTATE=22001, SQLERRMC=null, DRIVER=4.11.77
	at com.ibm.db2.jcc.am.gd.a(gd.java:668)
	at com.ibm.db2.jcc.am.gd.a(gd.java:60)
	at com.ibm.db2.jcc.am.gd.a(gd.java:127)
	at com.ibm.db2.jcc.am.jn.b(jn.java:2230)
	at com.ibm.db2.jcc.am.jn.c(jn.java:2213)
	at com.ibm.db2.jcc.t4.cb.k(cb.java:369)
	at com.ibm.db2.jcc.t4.cb.a(cb.java:61)
	at com.ibm.db2.jcc.t4.q.a(q.java:50)
	at com.ibm.db2.jcc.t4.sb.b(sb.java:226)
	at com.ibm.db2.jcc.am.kn.oc(kn.java:2930)
	at com.ibm.db2.jcc.am.kn.b(kn.java:3876)
	at com.ibm.db2.jcc.am.kn.b(kn.java:4047)
	at com.ibm.db2.jcc.am.kn.gc(kn.java:743)
	at com.ibm.db2.jcc.am.kn.executeUpdate(kn.java:722)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:98)
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:98)
	at org.springframework.jdbc.core.JdbcTemplate$2.doInPreparedStatement(JdbcTemplate.java:877)
	at org.springframework.jdbc.core.JdbcTemplate$2.doInPreparedStatement(JdbcTemplate.java:870)
	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:633)
	... 31 common frames omitted
[2018/06/11 15:50:04] [main] [o.s.b.c.l.s.SimpleJobLauncher] [INFO ] Job: [FlowJob: [name=BKP10170]] completed with the following parameters: [{chohyoFlg=1, innerParamKey=153110170btitouknzf20180313154102, schema=1531, chohyoId=10170, jsr_batch_run_id=1286}] and the following status: [UNKNOWN]
[2018/06/11 15:50:04] [main] [o.s.c.s.ClassPathXmlApplicationContext] [INFO ] Closing org.springframework.context.support.ClassPathXmlApplicationContext@1565ec2: startup date [Mon Jun 11 15:49:57 JST 2018]; root of context hierarchy


原因
JobRepositoryへの保存時にカラムのサイズを超えてしまう

解決策
job-repositoryタグにmax-varchar-length属性を追加する。

<job-repository id="jobRepository"
    data-source="dataSource"
    transaction-manager="transactionManager"
    isolation-level-for-create="SERIALIZABLE"
    table-prefix="BATCH_"
	max-varchar-length="1000"/>


参考
https://qiita.com/sndr/items/c853d7e0b4f650b94be4

https://github.com/spring-projects/spring-batch/blob/master/spring-batch-docs/asciidoc/job.adoc


---------------------------------------------------------------------------------------------

使用環境
テーブルが数値項目でNULLが許可されているカラムにNULLをセットすると
1:22 PM

cseとかで見るとたしかにNULLがセットされているのですが
1:23 PM
項目をdto.getJtac_CustomerNoBranch()でもってくるとｚ「0」が入っていたりしませんか？
1:24 PM
ＪＴチェック済持込の需要家番号枝番
状況
SQL上ではNullが入っているのに、javaでDTOに格納した際に0が格納される

https://qiita.com/momosetkn/items/9c3d42a1457cacc0f0ec

原因
テーブル定義にDEFAULT 0が設定されているため

------------------------------------------------------------------------------------


